jQuery(document).ready(function(t){"use strict";var e,a,o,i,n,r,s,c,l,d,h,u,g,f,v=500,p=t("header").outerHeight(),m="#navigation-show a, #logo a",y=t("#article-content").outerHeight(),b=t("main").outerHeight(),w=t(".investment-container").outerHeight(),C=".layout-post",T="#catelog-list",k="#layout-cart, #layout-pure",x='<div class = "transition"><div class = "three-bounce1"> </div> <div class = "three-bounce2"> </div> <div class = "three-bounce3"> </div> </div> ';(function(){var e=t("header").attr("data-img-mode"),a=" ",o=t("header").attr("data-random-max"),i=0;switch(t(C).length&&t("#current-post-cover").length&&(e="post"),e){case"random":i=Math.floor(Math.random()*(o-1)+1),a=t("header").attr("data-random-src")+i+".jpg";break;case"normal":a=t("header").attr("data-normal-src");break;case"post":a=t("#current-post-cover").attr("data-scr");break;default:a="https://source.unsplash.com/collection/954550/1920x1080"}function n(){t("html, body").delay(2*v).animate({scrollTop:p+2},3*v)}function r(){t("#status").fadeOut(),t("#preloader").delay(v).fadeOut("slow"),t("body").delay(v),setTimeout(function(){t("html").removeClass("html-loading")},v)}var s=new Image,c=setTimeout(function(){return console.log("timeout"),r(),void n()},2*v);s.crossOrigin="Anonymous",s.src=a,s.onerror=function(){c&&clearTimeout(c),r(),n(),console.log("Header background imgSrc:"+s.src),console.log("Failed to load & set background img for header!")},s.onload=function(){var e,a;c&&clearTimeout(c),e=s.src,a="url("+e+")",t("header").css("background-image",a),r(),t(C).length&&n(),function(e){var a="",o=[],i=new Vibrant(e).swatches().Vibrant;i&&(a=i.getBodyTextColor(),o=i.getRgb());var n=" ",r=.299*o[0]+.587*o[1]+.114*o[2];n=r>=192?"#000":"#fff",t(".motto, #read-more").css({color:n||a}),t(m).css({color:n||a}),t(m).each(function(){t(this).hover(function(){t(this).css({color:"darkgoldenrod"})},function(){t(this).css({color:n||a})})})}(s)}})(),function(){function e(e){t(".nav-container").toggleClass("is-visible",e)}var a,o,i;t(".nav-trigger").on("click",function(a){a.preventDefault(),e(!0),t("body").addClass("body-fixed")}),t(".nav-close").on("click",function(a){a.preventDefault(),e(!1),t("body").removeClass("body-fixed")}),a=location.href,o=!1,i=k,t("#navigation-show a").each(function(){var e=t(this).attr("class");e=e.substr(10),a.indexOf(e)>-1&&""!=t(this).attr("href")?(t(this).addClass("active"),o=!0):t(this).removeClass("active")}),!o&&t(i).length&&t("#navigation-show a").eq(0).addClass("active")}(),l=t(c="#navigation-hide").outerHeight(),d=t(".article-title").outerHeight(),h=t(".article-meta").outerHeight(),t(window).scroll(function(){var e=t(window).scrollTop(),a=t(document).height(),o=t(window).height(),i=0;((i=(i=t(C).length?(e-p)/(y+d+h+80-o)*100:e/(a-o)*100).toFixed(1))>100||i<0)&&(i=100),t("#progress-percentage h1").text(i+"%"),t("#progress-bar").attr("style","width: "+i+"%; display: block;"),e>=(500>p?500:p)?(t(c).css({top:"0"}).show(),t(".nav-trigger").show()):(t(c).css({top:"-"+l+"px"}).hide(),t(".nav-trigger").hide()),e>=p+300?t("#navigation-hide p").show():t("#navigation-hide p").hide()}).trigger("scroll"),n=p,r=b-w,s=".switch-button",t(C).length&&t(window).scroll(function(){var e=t(document).scrollTop();e>=n&&e<r?t(T).css("position","fixed").show().fadeIn(v):t(T).hide().fadeOut(v)}),t(T).length&&new katelog({contentEl:"article-content",catelogEl:"catelog-list",linkClass:"k-catelog-link",linkActiveClass:"k-catelog-link-active",selector:["h1","h2","h3","h4","h5","h6"],supplyTop:20,active:function(t){}}),t(C).length&&t(T).length?(t(s).show(),i=1,t(s).on("click",function(){t(this).toggleClass("toc-switch-button-active"),1==i?(t("main").toggleClass("inline-flex"),t("#layout-toc").toggleClass("show").fadeToggle(),i=2):(t("#layout-toc").toggleClass("show").fadeToggle(),setTimeout(function(){t("main").toggleClass("inline-flex")},v/2),i=1)})):t(s).hide(),u=t("#totop"),g=t("#read-more"),u.hide(),t(window).scroll(function(){t(document).scrollTop()>500?t(u).stop().fadeTo(v,1):t(u).stop().fadeTo(v,0)}),t(u).click(function(){return t("html, body").animate({scrollTop:0},500),!1}),t(g).click(function(){return t("html, body").animate({scrollTop:t("main").offset().top+2},500),!1}),function(){if(-1!=window.location.pathname.indexOf("archive")){var e="",a="";t("#layout-archive-year  ul li").each(function(o){var i=t(this).find("em").attr("year");(i<e||""==e)&&(e=i,""==a&&(a=i),t(this).before("<h3 class='"+e+"'>"+e+"<em>("+t("[year='"+e+"']").length+"篇)</em></h3>")),t(this).attr("year",e)}),t("#layout-archive-year h3").each(function(){t("#layout-archive-year ul li[year='"+t(this).attr("class")+"'").wrapAll("<div year='"+t(this).attr("class")+"'></div>"),t("h3."+t(this).attr("class")).click(function(){t(this).toggleClass("title-bg").next().slideToggle(300)})}),t("#layout-archive-year ul div[year!='"+a+"']").hide(),t("h3."+a).addClass("title-bg")}}(),t("body").on("click","#pagination a",function(){return t("#pagination a").text(" ").append(x),t.ajax({type:"get",url:t(this).attr("href"),async:!0,timeout:20*v,error:function(t){},success:function(e){var a=t(e).find("#post"),o=t(e).find("#pagination a").attr("href");t(k).append(a.fadeIn(v).addClass("annie-animation-zoom")),t("#pagination a").empty().text(t("#pagination a").attr("data-title")),void 0!=o?t("#pagination a").attr("href",o):t("#pagination").html("<span>"+t("#pagination a").attr("data-status")+"</span>")},complete:function(){}}),!1}),e=".investment-title-1",a="on",t(o=".investment-content").each(function(){t(this).children().eq(0).show()}),t(e).each(function(){t(this).children().eq(0).addClass(a)}),t(e).children().click(function(){t(this).addClass(a).siblings().removeClass(a);var i=t(e).children().index(this);t(o).children().eq(i).show().siblings().hide()}),t(".tags a, .category a").click(function(){t("#TCP-title").text("查询结果"),t("#TCP-content").text("").append(x);var e=t(this).attr("href");return void 0!=e&&t.ajax({url:e,type:"get",async:!0,error:function(t){},success:function(e){t("#TCP-content").empty();var a=t(e).find(".layout-archive");t("#TCP-content").append(a.fadeIn(v).addClass("annie-animation-zoom")),t(".layout-archive").css({paddingTop:"0"}),t(".layout-archive i").css({marginTop:"5px",marginBottom:"30px"})},complete:function(){}}),!1}),zh_init(),yall({observeChanges:!0}),t(".post-cover img, .relate-post-cover img").resizeToParent({parent:".post-cover, .relate-post-cover"}),f=t("body, .highlight").niceScroll({cursorborder:"none",autohidemode:!0}),t("body, .highlight").resize(function(t){setTimeout(function(){f.resize()},2)})});