!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("NaturalGallery",[],t):"object"==typeof exports?exports.NaturalGallery=t():e.NaturalGallery=t()}(this,function(){var e=Math.round,t=Math.max,n=Math.floor;return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.getIcon=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttribute("viewBox","0 0 100 100"),t.innerHTML='<use xlink:href="#'+e+'"></use>',t},e.toggleClass=function(e,t){e&&t&&(this.hasClass(e,t)?this.removeClass(e,t):this.addClass(e,t))},e.removeClass=function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},e.addClass=function(e,t){this.hasClass(t)||(e.className+=(e.className?" ":"")+t)},e.hasClass=function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},e.uniqBy=function(e,t){var n=[];return e.forEach(function(e){n.some(function(n){return e[t]===n[t]})||n.push(e)}),n},e.differenceBy=function(e,t,n){var i=[];return e.forEach(function(e){t.some(function(t){return e[n]===t[n]})||i.push(e)}),i},e.intersectionBy=function(e,t,n){var i=[];return e.forEach(function(e){t.some(function(t){return e[n]===t[n]})&&i.push(e)}),i};var t=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}];e.removeDiacritics=function(e){for(var n=0;n<t.length;n++)e=e.replace(t[n].letters,t[n].base);return e}}(t.Utility||(t.Utility={}))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.header=e,this._collection=null}return e.prototype.isActive=function(){return null!==this.collection},Object.defineProperty(e.prototype,"collection",{get:function(){return this._collection},set:function(e){this._collection=e},enumerable:!0,configurable:!0}),e}();t.AbstractFilter=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(3),n(4);var i=n(5);t.Gallery=i.Gallery},function(){},function(){},function(e,i,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=o(6),u=o(9),l=o(10),s=o(11),a=o(0),c=o(13),d=function(){function e(e,t,i,o){for(var r in void 0===o&&(o=null),this.scrollElement=o,this._options={rowHeight:350,format:"natural",round:3,margin:3,limit:0,showLabels:"hover",lightbox:!0,minRowsAtStart:2,showCount:!1,searchFilter:!1,categoriesFilter:!1,showNone:!1,showOthers:!1,labelCategories:"Category",labelNone:"None",labelOthers:"Others",labelSearch:"Search",labelImages:"Images",selectable:!1,zoomRotation:!0,infiniteScrollOffset:0},this._events={},this.old_scroll_top=0,this._pswpContainer=[],this._collection=[],this._categories=[],this._selected=[],this.defaultImageRatio=.7,this.pswpElement=t,this.options)void 0===i.options[r]&&(i.options[r]=this.options[r]);this.options=i.options,this.categories=i.categories?i.categories:[],this.rootElement=e,a.Utility.addClass(this.rootElement,"natural-gallery"),this._events=i.events?i.events:{},this._events.select&&(this.options.selectable=!0),(this.options.searchFilter||this.options.categoriesFilter||this.options.showCount)&&(this.header=new u.Header(this),this.options.searchFilter&&this.header.addFilter(new l.SearchFilter(this.header)),this.options.categoriesFilter&&this.header.addFilter(new s.CategoryFilter(this.header))),this.render(),this.bodyWidth=n(this.bodyElement.getBoundingClientRect().width),i.images?this.collection=i.images:this.pagination(),0===this.options.limit&&this.bindScroll(null===o?document:o)}return e.prototype.render=function(){var e=this;this.noResults=document.createElement("div"),a.Utility.addClass(this.noResults,"natural-gallery-noresults"),this.noResults.appendChild(a.Utility.getIcon("icon-noresults")),this.noResults.style.display="block",this.nextButton=document.createElement("div"),a.Utility.addClass(this.nextButton,"natural-gallery-next"),this.nextButton.appendChild(a.Utility.getIcon("icon-next")),this.nextButton.style.display="none",this.nextButton.addEventListener("click",function(t){t.preventDefault();var n=e.getRowsPerPage();e.addElements(n),e.pagination(n)});var t=document.createElement("iframe");this.rootElement.appendChild(t);var n=null;t.contentWindow.addEventListener("resize",function(){clearTimeout(n),n=setTimeout(function(){e.resize()},100)}),this.bodyElement=document.createElement("div"),a.Utility.addClass(this.bodyElement,"natural-gallery-body"),this.bodyElement.appendChild(this.noResults),this.header&&this.rootElement.appendChild(this.header.render()),this.rootElement.appendChild(this.bodyElement),this.rootElement.appendChild(this.nextButton)},e.prototype.addItems=function(e){if(e.constructor===Array&&e.length){var t=0===this.collection.length||this.collection.length===this.pswpContainer.length;e.forEach(function(e){this._collection.push(new r.Item(e,this))},this),c.Organizer.organize(this),this.header&&this.header.refresh(),t&&this.addElements(this.getRowsPerPage())}},e.prototype.style=function(){this.collection.forEach(function(e){e.style()})},e.prototype.addElements=function(e){void 0===e&&(e=null);var t=this.collection;if(this.nextButton.style.display="block",this.pswpContainer.length===t.length)return this.nextButton.style.display="none",void(0===t.length&&(this.noResults.style.display="block",this.rootElement.getElementsByClassName("natural-gallery-images")[0].style.display="none"));for(var n,i=this.pswpContainer.length,o=this.pswpContainer.length?t[i].row+e:e,r=i;r<t.length;r++)(n=t[r]).row<o&&(this.pswpContainer.push(n.getPswpItem()),this.bodyElement.appendChild(n.loadElement()),n.bindClick(),n.flash()),this.pswpContainer.length===t.length&&(this.nextButton.style.display="none");this.noResults.style.display="none";var u=this.rootElement.getElementsByClassName("natural-gallery-images")[0];u&&(u.style.display="block");var l=this.rootElement.getElementsByClassName("natural-gallery-visible")[0];l&&(l.textContent=this.pswpContainer.length+"");var s=this.rootElement.getElementsByClassName("natural-gallery-total")[0];s&&(s.textContent=t.length+"")},e.prototype.getRowsPerPage=function(){if(this.options.limit)return this.options.limit;var e=(this.scrollElement?this.scrollElement.clientHeight:document.documentElement.clientHeight)-this.bodyElement.offsetTop,t=n(e/(.55*this.options.rowHeight));return t<this.options.minRowsAtStart?this.options.minRowsAtStart:t},e.prototype.resize=function(){var e=n(this.bodyElement.getBoundingClientRect().width);if(e!==this.bodyWidth){this.bodyWidth=e,c.Organizer.organize(this);var t=this.collection[this.pswpContainer.length-1],i=t?t.row+1:this.getRowsPerPage();this.reset(),this.addElements(i)}},e.prototype.refresh=function(){this.reset(),c.Organizer.organize(this),this.addElements(this.getRowsPerPage())},e.prototype.reset=function(){this.pswpContainer=[],this._collection.forEach(function(e){e.remove()}),this.noResults.style.display="block"},e.prototype.bindScroll=function(e){var t,n=this;t=e instanceof Document?e.documentElement:e,e.addEventListener("scroll",function(){var e=n.rootElement.offsetTop+n.rootElement.offsetHeight+n.options.infiniteScrollOffset,i=t.scrollTop-(t.clientTop||0),o=t.clientHeight,r=i-n.old_scroll_top;n.old_scroll_top=i,0<r&&i+o>=e&&(n.addElements(1),n.pagination(1))})},e.prototype.pagination=function(e){if(void 0===e&&(e=1),this.events.pagination)if(this.collection.length){var t=this.getMaxImagesPerRow();this._events.pagination(this.collection.length,t*e)}else{var n=c.Organizer.simulatePagination(this);this._events.pagination(this.collection.length,n*this.getRowsPerPage()*2)}},e.prototype.getMaxImagesPerRow=function(){return t.apply(null,function(e){return e.reduce(function(e,t){return e[t.row]=-1<e[t.row]?e[t.row]+1:1,e},[])}(this.collection))},e.prototype.select=function(e){-1===this._selected.indexOf(e)&&(this._selected.push(e),this._events.select(this._selected.map(function(e){return e.fields})))},e.prototype.unselect=function(e){var t=this._selected.indexOf(e);-1<t&&(this._selected.splice(t,1),this._events.select(this._selected.map(function(e){return e.fields})))},e.prototype.unselectAll=function(){for(var e=this._selected.length-1;0<=e;e--)this._selected[e].toggleSelect();this._selected=[]},Object.defineProperty(e.prototype,"events",{get:function(){return this._events},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pswpContainer",{get:function(){return this._pswpContainer},set:function(e){this._pswpContainer=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collection",{get:function(){return this.header&&this.header.isFiltered()?this.header.collection:this._collection},set:function(e){this.reset(),this._collection=[],this.addItems(e)},enumerable:!0,configurable:!0}),e.prototype.getOriginalCollection=function(){return this._collection},Object.defineProperty(e.prototype,"bodyWidth",{get:function(){return this._bodyWidth},set:function(e){this._bodyWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bodyElement",{get:function(){return this._bodyElement},set:function(e){this._bodyElement=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rootElement",{get:function(){return this._rootElement},set:function(e){this._rootElement=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pswpApi",{get:function(){return this._pswpApi},set:function(e){this._pswpApi=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pswpElement",{get:function(){return this._pswpElement},set:function(e){this._pswpElement=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},set:function(e){this._options=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"header",{get:function(){return this._header},set:function(e){this._header=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"categories",{get:function(){return this._categories},set:function(e){this._categories=e},enumerable:!0,configurable:!0}),e}();i.Gallery=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(7),r=n(8),u=function(){function e(e,t){this.gallery=t,this._binded=!1,this.selected=!1,this._fields=e,this.id=e.id,this.thumbnail=e.thumbnail,this.enlarged=e.enlarged,this.title=this.getTitle(e),this.link=this.getLink(e),this.linkTarget=this.getLinkTarget(e),this.tWidth=e.tWidth,this.tHeight=e.tHeight,this.eWidth=e.eWidth,this.eHeight=e.eHeight,this.categories=e.categories,this.last=e.last,this.createElement()}return e.prototype.getTitle=function(e){return e.title?this.getTitleDetails(e.title).title:null},e.prototype.getLink=function(e){return e.link?e.link:this.getTitleDetails(e.title).link},e.prototype.getLinkTarget=function(e){return e.linkTarget?e.linkTarget:this.getTitleDetails(e.title).linkTarget},e.prototype.getTitleDetails=function(e){var t=document.createElement("div");t.innerHTML=e;var n=t.getElementsByTagName("a"),i={title:t.textContent,link:null,linkTarget:null};return n[0]&&(i.link=n[0].getAttribute("href"),i.linkTarget=n[0].getAttribute("target")),i},e.prototype.createElement=function(){var e=this,t=this.gallery.options,n=null;this.title&&-1<["true","hover"].indexOf(t.showLabels)&&(n=!0);var o=document.createElement("div"),r=document.createElement("div"),u=this.getLinkElement(),l=null;if(t.lightbox&&n&&u?(n=u,i.Utility.addClass(n,"button"),l=r):t.lightbox&&n&&!u?(n=document.createElement("div"),l=o):t.lightbox&&!n?l=o:!t.lightbox&&n&&u?(o=u,(n=document.createElement("div")).classList.add("button")):t.lightbox||!n||u?!t.lightbox&&!n&&u&&(o=u):n=document.createElement("div"),l&&(i.Utility.addClass(l,"zoomable"),t.zoomRotation&&i.Utility.addClass(l,"rotation")),i.Utility.addClass(r,"image"),i.Utility.addClass(o,"figure loading visible"),r.style.backgroundImage="url("+this.thumbnail+")",o.appendChild(r),t.round){var s=t.round+"px";o.style.borderRadius=s,r.style.borderRadius=s}if(this.element=o,this.image=r,n&&(n.textContent=this.title,i.Utility.addClass(n,"title"),"hover"===t.showLabels&&i.Utility.addClass(n,"hover"),o.appendChild(n)),this.gallery.options.selectable){this.selectBtn=document.createElement("div");var a=i.Utility.getIcon("icon-select");this.selectBtn.appendChild(a),this.selectBtn.classList.add("selectBtn"),a.addEventListener("click",function(t){t.stopPropagation(),e.toggleSelect()}),this.element.appendChild(this.selectBtn)}},e.prototype.toggleSelect=function(){this.selected=!this.selected,this.selected?(this.element.classList.add("selected"),this.gallery.select(this)):(this.element.classList.remove("selected"),this.gallery.unselect(this))},e.prototype.getLinkElement=function(){var e=this,t=null;return this.link&&(t=document.createElement("a"),this.gallery.events.link?t.addEventListener("click",function(t){e.gallery.events.link.preventDefault&&t.preventDefault(),e.gallery.events.link.callback(e._fields)}):(t.setAttribute("href",this.link),i.Utility.addClass(t,"link"),this.linkTarget&&t.setAttribute("target",this.linkTarget))),t},e.prototype.style=function(){i.Utility.removeClass(this.element,"visible"),this.element.style.width=this.width+"px",this.element.style.height=this.height+"px",this.element.style.marginRight=this.gallery.options.margin+"px",this.element.style.marginBottom=this.gallery.options.margin+"px",this.last&&(this.element.style.marginRight="0");var e=this;window.setTimeout(function(){i.Utility.addClass(e.element,"visible")},0)},e.prototype.flash=function(){var e=this;i.Utility.removeClass(this.element,"visible"),window.setTimeout(function(){i.Utility.addClass(e.element,"visible")},0)},e.prototype.bindClick=function(){if(this.gallery.options.lightbox){var e=this;if(!this.binded){this.binded=!0;(this.link?this.image:this.element).addEventListener("click",function(t){e.openPhotoSwipe.call(e,t,e.element)})}}},e.prototype.openPhotoSwipe=function(e,t){e.preventDefault();var n=this;if(this.gallery.options.lightbox){var i=Array.prototype.slice.call(t.parentNode.children).indexOf(t)-1,u=new o(this.gallery.pswpElement,r,this.gallery.pswpContainer,{index:i,bgOpacity:.85,showHideOpacity:!0,loop:!1});this.gallery.pswpApi=u,u.init();var l=null;u.listen("beforeChange",function(e){0<e&&u.getCurrentIndex()===u.items.length-1?n.gallery.addElements():e===-1*(u.items.length-1)&&(l=u.items.length,n.gallery.addElements())}),u.listen("afterChange",function(){l&&(u.goTo(l),l=null)})}},e.prototype.getPswpItem=function(){return{src:this._enlarged,w:this._eWidth,h:this._eHeight,title:this._title}},e.prototype.getElement=function(){return this.element},e.prototype.loadElement=function(){var e=this,t=document.createElement("img");return t.setAttribute("src",this.thumbnail),t.addEventListener("load",function(){i.Utility.removeClass(e.element,"loading"),i.Utility.addClass(e.element,"loaded")}),t.addEventListener("error",function(){i.Utility.addClass(e.element,"errored")}),this.element},e.prototype.remove=function(){this.getElement().parentNode&&this.getElement().parentNode.removeChild(this.getElement())},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thumbnail",{get:function(){return this._thumbnail},set:function(e){this._thumbnail=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enlarged",{get:function(){return this._enlarged},set:function(e){this._enlarged=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this._title},set:function(e){this._title=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tWidth",{get:function(){return this._tWidth},set:function(e){this._tWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tHeight",{get:function(){return this._tHeight},set:function(e){this._tHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eWidth",{get:function(){return this._eWidth},set:function(e){this._eWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eHeight",{get:function(){return this._eHeight},set:function(e){this._eHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this._last},set:function(e){this._last=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"categories",{get:function(){return this._categories},set:function(e){this._categories=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"row",{get:function(){return this._row},set:function(e){this._row=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return this._description},set:function(e){this._description=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binded",{get:function(){return this._binded},set:function(e){this._binded=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"link",{get:function(){return this._link},set:function(e){this._link=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"linkTarget",{get:function(){return this._linkTarget},set:function(e){this._linkTarget=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fields",{get:function(){return this._fields},enumerable:!0,configurable:!0}),e}();t.Item=u},function(n,i,o){var r,u;!function(e,t){void 0===(u="function"==typeof(r=t)?r.call(i,o,i,n):r)||(n.exports=u)}(0,function(){"use strict";return function(n,i,o,r){var u=Math.min,l=Math.abs,s=Math.PI,a={features:null,bind:function(e,t,n,i){var o=(i?"remove":"add")+"EventListener";t=t.split(" ");for(var r=0;r<t.length;r++)t[r]&&e[o](t[r],n,!1)},isArray:function(e){return e instanceof Array},createEl:function(e,t){var n=document.createElement(t||"div");return e&&(n.className=e),n},getScrollY:function(){var e=window.pageYOffset;return void 0===e?document.documentElement.scrollTop:e},unbind:function(e,t,n){a.bind(e,t,n,!0)},removeClass:function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){a.hasClass(e,t)||(e.className+=(e.className?" ":"")+t)},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){for(var n=e.firstChild;n;){if(a.hasClass(n,t))return n;n=n.nextSibling}},arraySearch:function(e,t,n){for(var i=e.length;i--;)if(e[i][n]===t)return i;return-1},extend:function(e,t,n){for(var i in t)if(t.hasOwnProperty(i)){if(n&&e.hasOwnProperty(i))continue;e[i]=t[i]}},easing:{sine:{out:function(e){return Math.sin(e*(s/2))},inOut:function(e){return-(Math.cos(s*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(a.features)return a.features;var e=a.createEl().style,n="",i={};if(i.oldIE=document.all&&!document.addEventListener,i.touch="ontouchstart"in window,window.requestAnimationFrame&&(i.raf=window.requestAnimationFrame,i.caf=window.cancelAnimationFrame),i.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!i.pointerEvent){var o=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var r=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);r&&0<r.length&&(1<=(r=parseInt(r[1],10))&&8>r&&(i.isOldIOSPhone=!0))}var u=o.match(/Android\s([0-9\.]*)/),l=u?u[1]:0;1<=(l=parseFloat(l))&&(4.4>l&&(i.isOldAndroid=!0),i.androidVersion=l),i.isMobileOpera=/opera mini|opera mobi/i.test(o)}for(var s,c,d=["transform","perspective","animationName"],p=["","webkit","Moz","ms","O"],h=0;4>h;h++){n=p[h];for(var f=0;3>f;f++)s=d[f],c=n+(n?s.charAt(0).toUpperCase()+s.slice(1):s),!i[s]&&c in e&&(i[s]=c);n&&!i.raf&&(n=n.toLowerCase(),i.raf=window[n+"RequestAnimationFrame"],i.raf&&(i.caf=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]))}if(!i.raf){var m=0;i.raf=function(e){var n=(new Date).getTime(),i=t(0,16-(n-m)),o=window.setTimeout(function(){e(n+i)},i);return m=n+i,o},i.caf=function(e){clearTimeout(e)}}return i.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,a.features=i,i}};a.detectFeatures(),a.features.oldIE&&(a.bind=function(e,t,n,i){t=t.split(" ");for(var o,r=(i?"detach":"attach")+"Event",u=function(){n.handleEvent.call(n)},l=0;l<t.length;l++)if(o=t[l])if("object"==typeof n&&n.handleEvent){if(i){if(!n["oldIE"+o])return!1}else n["oldIE"+o]=u;e[r]("on"+o,n["oldIE"+o])}else e[r]("on"+o,n)});var c=this,d={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return"A"===e.tagName},getDoubleTapZoom:function(e,t){return e?1:.7>t.initialZoomLevel?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};a.extend(d,r);var p,h,f,m,g,y,E,v,b,C,w,x,F,A,_,D,I,O,T,B,P,k,S,R,L,U,z,N,M,j,Z,H,W,K,q,G,Y,V,X,$,J,Q,ee,te,ne,ie,oe,re,ue,le,se,ae,ce,de,pe,he,fe={x:0,y:0},me={x:0,y:0},ge={x:0,y:0},ye={},Ee=0,ve={},be={x:0,y:0},Ce=0,we=!0,xe=[],Fe={},Ae=!1,_e=function(e,t){a.extend(c,t.publicMethods),xe.push(e)},De=function(e){var t=Kt();return e>t-1?e-t:0>e?t+e:e},Ie={},Oe=function(e,t){return Ie[e]||(Ie[e]=[]),Ie[e].push(t)},Te=function(e){var t=Ie[e];if(t){var n=Array.prototype.slice.call(arguments);n.shift();for(var i=0;i<t.length;i++)t[i].apply(c,n)}},Be=function(){return(new Date).getTime()},Pe=function(e){de=e,c.bg.style.opacity=e*d.bgOpacity},ke=function(e,t,n,i,o){(!Ae||o&&o!==c.currItem)&&(i/=o?o.fitRatio:c.currItem.fitRatio),e[k]=x+t+"px, "+n+"px"+F+" scale("+i+")"},Se=function(e){ue&&(e&&(C>c.currItem.fitRatio?!Ae&&(tn(c.currItem,!1,!0),Ae=!0):Ae&&(tn(c.currItem),Ae=!1)),ke(ue,ge.x,ge.y,C))},Re=function(e){e.container&&ke(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)},Le=function(e,t){t[k]=x+e+"px, 0px"+F},Ue=function(t,n){if(!d.loop&&n){var i=m+(be.x*Ee-t)/be.x,o=e(t-ft.x);(0>i&&0<o||i>=Kt()-1&&0>o)&&(t=ft.x+o*d.mainScrollEndFriction)}ft.x=t,Le(t,g)},ze=function(e,t){var n=mt[e]-ve[e];return me[e]+fe[e]+n-n*(t/w)},Ne=function(e,t){e.x=t.x,e.y=t.y,t.id&&(e.id=t.id)},Me=function(t){t.x=e(t.x),t.y=e(t.y)},je=null,Ze=function(){je&&(a.unbind(document,"mousemove",Ze),a.addClass(n,"pswp--has_mouse"),d.mouseUsed=!0,Te("mouseUsed")),je=setTimeout(function(){je=null},100)},He=function(e,t){var n=$t(c.currItem,ye,e);return t&&(re=n),n},We=function(e){return e||(e=c.currItem),e.initialZoomLevel},Ke=function(e){return e||(e=c.currItem),0<e.w?d.maxSpreadZoom:1},qe=function(e,t,n,i){return i===c.currItem.initialZoomLevel?(n[e]=c.currItem.initialPosition[e],!0):(n[e]=ze(e,i),n[e]>t.min[e]?(n[e]=t.min[e],!0):!!(n[e]<t.max[e])&&(n[e]=t.max[e],!0))},Ge=function(e){var t="";d.escKey&&27===e.keyCode?t="close":d.arrowKeys&&(37===e.keyCode?t="prev":39===e.keyCode&&(t="next")),!t||e.ctrlKey||e.altKey||e.shiftKey||e.metaKey||(e.preventDefault?e.preventDefault():e.returnValue=!1,c[t]())},Ye=function(e){!e||(Q||J||le||Y)&&(e.preventDefault(),e.stopPropagation())},Ve=function(){c.setScrollOffset(0,a.getScrollY())},Xe={},$e=0,Je=function(e){Xe[e]&&(Xe[e].raf&&U(Xe[e].raf),$e--,delete Xe[e])},Qe=function(e){Xe[e]&&Je(e),Xe[e]||($e++,Xe[e]={})},et=function(){for(var e in Xe)Xe.hasOwnProperty(e)&&Je(e)},tt=function(e,t,n,i,o,r,u){var l,s=Be();Qe(e);var a=function(){if(Xe[e]){if((l=Be()-s)>=i)return Je(e),r(n),void(u&&u());r((n-t)*o(l/i)+t),Xe[e].raf=L(a)}};a()},nt={},it={},ot={},rt={},ut={},lt=[],st={},at=[],ct={},dt=0,pt={x:0,y:0},ht=0,ft={x:0,y:0},mt={x:0,y:0},gt={x:0,y:0},yt=function(e,t){return ct.x=l(e.x-t.x),ct.y=l(e.y-t.y),Math.sqrt(ct.x*ct.x+ct.y*ct.y)},Et=function(){ee&&(U(ee),ee=null)},vt=function(){X&&(ee=L(vt),kt())},bt=function(e,t){return e&&e!==document&&!(e.getAttribute("class")&&-1<e.getAttribute("class").indexOf("pswp__scroll-wrap"))&&(t(e)?e:bt(e.parentNode,t))},Ct={},wt=function(e,t){return Ct.prevent=!bt(e.target,d.isClickableElement),Te("preventDragEvent",e,t,Ct),Ct.prevent},xt=function(e,t){return t.x=e.pageX,t.y=e.pageY,t.id=e.identifier,t},Ft=function(e,t,n){n.x=.5*(e.x+t.x),n.y=.5*(e.y+t.y)},At=function(){var e=ge.y-c.currItem.initialPosition.y;return 1-l(e/(ye.y/2))},_t={},Dt={},It=[],Ot=function(e){for(;0<It.length;)It.pop();return S?(he=0,lt.forEach(function(e){0===he?It[0]=e:1===he&&(It[1]=e),he++})):-1<e.type.indexOf("touch")?e.touches&&0<e.touches.length&&(It[0]=xt(e.touches[0],_t),1<e.touches.length&&(It[1]=xt(e.touches[1],Dt))):(_t.x=e.pageX,_t.y=e.pageY,_t.id="",It[0]=_t),It},Tt=function(e,t){var n,i,o,r,u=ge[e]+t[e],l=0<t[e],s=ft.x+t.x,a=ft.x-st.x;return n=u>re.min[e]||u<re.max[e]?d.panEndFriction:1,u=ge[e]+t[e]*n,!d.allowPanToNext&&C!==c.currItem.initialZoomLevel||(ue?"h"===se&&"x"===e&&!J&&(l?(u>re.min[e]&&(n=d.panEndFriction,re.min[e]-u,i=re.min[e]-me[e]),(0>=i||0>a)&&1<Kt()?(r=s,0>a&&s>st.x&&(r=st.x)):re.min.x!==re.max.x&&(o=u)):(u<re.max[e]&&(n=d.panEndFriction,u-re.max[e],i=me[e]-re.max[e]),(0>=i||0<a)&&1<Kt()?(r=s,0<a&&s<st.x&&(r=st.x)):re.min.x!==re.max.x&&(o=u))):r=s,"x"!==e)?void(!le&&!te&&C>c.currItem.fitRatio&&(ge[e]+=t[e]*n)):(void 0!==r&&(Ue(r,!0),te=r!==st.x),re.min.x!==re.max.x&&(void 0===o?!te&&(ge.x+=t.x*n):ge.x=o),void 0!==r)},Bt=function(e){if(!("mousedown"===e.type&&0<e.button)){if(Ht)return void e.preventDefault();if(!V||"mousedown"!==e.type){if(wt(e,!0)&&e.preventDefault(),Te("pointerDown"),S){var t=a.arraySearch(lt,e.pointerId,"id");0>t&&(t=lt.length),lt[t]={x:e.pageX,y:e.pageY,id:e.pointerId}}var n=Ot(e),i=n.length;ne=null,et(),X&&1!==i||(X=ae=!0,a.bind(window,E,c),G=pe=ce=Y=te=Q=$=J=!1,se=null,Te("firstTouchStart",n),Ne(me,ge),fe.x=fe.y=0,Ne(rt,n[0]),Ne(ut,rt),st.x=be.x*Ee,at=[{x:rt.x,y:rt.y}],K=W=Be(),He(C,!0),Et(),vt()),ie||!(1<i)||le||te||(w=C,J=!1,ie=$=!0,fe.y=fe.x=0,Ne(me,ge),Ne(nt,n[0]),Ne(it,n[1]),Ft(nt,it,gt),mt.x=l(gt.x)-ge.x,mt.y=l(gt.y)-ge.y,oe=yt(nt,it))}}},Pt=function(e){if(e.preventDefault(),S){var t=a.arraySearch(lt,e.pointerId,"id");if(-1<t){var n=lt[t];n.x=e.pageX,n.y=e.pageY}}if(X){var i=Ot(e);if(se||Q||ie)ne=i;else if(ft.x!==be.x*Ee)se="h";else{var o=l(i[0].x-rt.x)-l(i[0].y-rt.y);l(o)>=10&&(se=0<o?"h":"v",ne=i)}}},kt=function(){if(ne){var e=ne.length;if(0!==e)if(Ne(nt,ne[0]),ot.x=nt.x-rt.x,ot.y=nt.y-rt.y,ie&&1<e){if(rt.x=nt.x,rt.y=nt.y,!ot.x&&!ot.y&&function(e,t){return e.x===t.x&&e.y===t.y}(ne[1],it))return;Ne(it,ne[1]),J||(J=!0,Te("zoomGestureStarted"));var t=yt(nt,it),n=zt(t);n>c.currItem.initialZoomLevel+c.currItem.initialZoomLevel/15&&(pe=!0);var i=1,o=We(),r=Ke();if(n<o)if(d.pinchToClose&&!pe&&w<=c.currItem.initialZoomLevel){var u=1-(o-n)/(o/1.2);Pe(u),Te("onPinchClose",u),ce=!0}else 1<(i=(o-n)/o)&&(i=1),n=o-i*(o/3);else n>r&&(1<(i=(n-r)/(6*o))&&(i=1),n=r+i*o);0>i&&(i=0),t,Ft(nt,it,pt),fe.x+=pt.x-gt.x,fe.y+=pt.y-gt.y,Ne(gt,pt),ge.x=ze("x",n),ge.y=ze("y",n),G=n>C,C=n,Se()}else{if(!se)return;if(ae&&(ae=!1,l(ot.x)>=10&&(ot.x-=ne[0].x-ut.x),l(ot.y)>=10&&(ot.y-=ne[0].y-ut.y)),rt.x=nt.x,rt.y=nt.y,0===ot.x&&0===ot.y)return;if("v"===se&&d.closeOnVerticalDrag&&"fit"===d.scaleMode&&C===c.currItem.initialZoomLevel){fe.y+=ot.y,ge.y+=ot.y;var s=At();return Y=!0,Te("onVerticalDrag",s),Pe(s),void Se()}(function(e,t,n){if(50<e-K){var i=2<at.length?at.shift():{};i.x=t,i.y=n,at.push(i),K=e}})(Be(),nt.x,nt.y),Q=!0,re=c.currItem.bounds,Tt("x",ot)||(Tt("y",ot),Me(ge),Se())}}},St=function(e){if(Z.isOldAndroid){if(V&&"mouseup"===e.type)return;-1<e.type.indexOf("touch")&&(clearTimeout(V),V=setTimeout(function(){V=0},600))}var t;if(Te("pointerUp"),wt(e,!1)&&e.preventDefault(),S){var n=a.arraySearch(lt,e.pointerId,"id");-1<n&&(t=lt.splice(n,1)[0],navigator.pointerEnabled?t.type=e.pointerType||"mouse":(t.type={2:"touch",3:"pen",4:"mouse"}[e.pointerType],t.type||(t.type=e.pointerType||"mouse")))}var i,o=Ot(e),r=o.length;if("mouseup"===e.type&&(r=0),2===r)return ne=null,!0;1===r&&Ne(ut,o[0]),0!==r||se||le||(!t&&("mouseup"===e.type?t={x:e.pageX,y:e.pageY,type:"mouse"}:e.changedTouches&&e.changedTouches[0]&&(t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"})),Te("touchRelease",e,t));var u=-1;if(0===r&&(X=!1,a.unbind(window,E,c),Et(),ie?u=0:-1!=ht&&(u=Be()-ht)),ht=1===r?Be():-1,i=-1!=u&&150>u?"zoom":"swipe",ie&&2>r&&(ie=!1,1===r&&(i="zoomPointerUp"),Te("zoomGestureEnded")),ne=null,Q||J||le||Y){if(et(),q||(q=Rt()),q.calculateSwipeSpeed("x"),Y){if(At()<d.verticalDragRange)c.close();else{var l=ge.y,s=de;tt("verticalDrag",0,1,300,a.easing.cubic.out,function(e){ge.y=(c.currItem.initialPosition.y-l)*e+l,Pe((1-s)*e+s),Se()}),Te("onVerticalDrag",1)}return}if((te||le)&&0===r){if(Ut(i,q))return;i="zoomPointerUp"}return le?void 0:"swipe"===i?void(!te&&C>c.currItem.fitRatio&&Lt(q)):void Nt()}},Rt=function(){var t,n,i={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(e){1<at.length?(t=Be()-K+50,n=at[at.length-2][e]):(t=Be()-W,n=ut[e]),i.lastFlickOffset[e]=rt[e]-n,i.lastFlickDist[e]=l(i.lastFlickOffset[e]),i.lastFlickSpeed[e]=20<i.lastFlickDist[e]?i.lastFlickOffset[e]/t:0,.1>l(i.lastFlickSpeed[e])&&(i.lastFlickSpeed[e]=0),i.slowDownRatio[e]=.95,i.slowDownRatioReverse[e]=1-i.slowDownRatio[e],i.speedDecelerationRatio[e]=1},calculateOverBoundsAnimOffset:function(e,t){i.backAnimStarted[e]||(ge[e]>re.min[e]?i.backAnimDestination[e]=re.min[e]:ge[e]<re.max[e]&&(i.backAnimDestination[e]=re.max[e]),void 0!==i.backAnimDestination[e]&&(i.slowDownRatio[e]=.7,i.slowDownRatioReverse[e]=1-i.slowDownRatio[e],.05>i.speedDecelerationRatioAbs[e]&&(i.lastFlickSpeed[e]=0,i.backAnimStarted[e]=!0,tt("bounceZoomPan"+e,ge[e],i.backAnimDestination[e],t||300,a.easing.sine.out,function(t){ge[e]=t,Se()}))))},calculateAnimOffset:function(e){i.backAnimStarted[e]||(i.speedDecelerationRatio[e]*=i.slowDownRatio[e]+i.slowDownRatioReverse[e]-i.slowDownRatioReverse[e]*i.timeDiff/10,i.speedDecelerationRatioAbs[e]=l(i.lastFlickSpeed[e]*i.speedDecelerationRatio[e]),i.distanceOffset[e]=i.lastFlickSpeed[e]*i.speedDecelerationRatio[e]*i.timeDiff,ge[e]+=i.distanceOffset[e])},panAnimLoop:function(){if(Xe.zoomPan&&(Xe.zoomPan.raf=L(i.panAnimLoop),i.now=Be(),i.timeDiff=i.now-i.lastNow,i.lastNow=i.now,i.calculateAnimOffset("x"),i.calculateAnimOffset("y"),Se(),i.calculateOverBoundsAnimOffset("x"),i.calculateOverBoundsAnimOffset("y"),.05>i.speedDecelerationRatioAbs.x&&.05>i.speedDecelerationRatioAbs.y))return ge.x=e(ge.x),ge.y=e(ge.y),Se(),void Je("zoomPan")}};return i},Lt=function(e){return e.calculateSwipeSpeed("y"),re=c.currItem.bounds,e.backAnimDestination={},e.backAnimStarted={},.05>=l(e.lastFlickSpeed.x)&&.05>=l(e.lastFlickSpeed.y)?(e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0,e.calculateOverBoundsAnimOffset("x"),e.calculateOverBoundsAnimOffset("y"),!0):(Qe("zoomPan"),e.lastNow=Be(),void e.panAnimLoop())},Ut=function(e,n){var i,o,r;if(le||(dt=m),"swipe"===e){var s=rt.x-ut.x,p=10>n.lastFlickDist.x;s>30&&(p||20<n.lastFlickOffset.x)?o=-1:s<-30&&(p||-20>n.lastFlickOffset.x)&&(o=1)}o&&(0>(m+=o)?(m=d.loop?Kt()-1:0,r=!0):m>=Kt()&&(m=d.loop?0:Kt()-1,r=!0),(!r||d.loop)&&(Ce+=o,Ee-=o,i=!0));var h,f=be.x*Ee,g=l(f-ft.x);return i||f>ft.x==0<n.lastFlickSpeed.x?(h=0<l(n.lastFlickSpeed.x)?g/l(n.lastFlickSpeed.x):333,h=u(h,400),h=t(h,250)):h=333,dt===m&&(i=!1),le=!0,Te("mainScrollAnimStart"),tt("mainScroll",ft.x,f,h,a.easing.cubic.out,Ue,function(){et(),le=!1,dt=-1,(i||dt!==m)&&c.updateCurrItem(),Te("mainScrollAnimComplete")}),i&&c.updateCurrItem(!0),i},zt=function(e){return 1/oe*e*w},Nt=function(){var e=C,t=We(),n=Ke();C<t?e=t:C>n&&(e=n);var i,o=de;return ce&&!G&&!pe&&C<t?(c.close(),!0):(ce&&(i=function(e){Pe((1-o)*e+o)}),c.zoomTo(e,0,200,a.easing.cubic.out,i),!0)};_e("Gestures",{publicMethods:{initGestures:function(){var e=function(e,t,n,i,o){O=e+t,T=e+n,B=e+i,P=o?e+o:""};(S=Z.pointerEvent)&&Z.touch&&(Z.touch=!1),S?navigator.pointerEnabled?e("pointer","down","move","up","cancel"):e("MSPointer","Down","Move","Up","Cancel"):Z.touch?(e("touch","start","move","end","cancel"),R=!0):e("mouse","down","move","up"),E=T+" "+B+" "+P,v=O,S&&!R&&(R=1<navigator.maxTouchPoints||1<navigator.msMaxTouchPoints),c.likelyTouchDevice=R,b[O]=Bt,b[T]=Pt,b[B]=St,P&&(b[P]=b[B]),Z.touch&&(v+=" mousedown",E+=" mousemove mouseup",b.mousedown=b[O],b.mousemove=b[T],b.mouseup=b[B]),R||(d.allowPanToNext=!1)}}});var Mt,jt,Zt,Ht,Wt,Kt,qt=function(e,t,i,o){var r;Mt&&clearTimeout(Mt),Ht=!0,Zt=!0,e.initialLayout?(r=e.initialLayout,e.initialLayout=null):r=d.getThumbBoundsFn&&d.getThumbBoundsFn(m);var u=i?d.hideAnimationDuration:d.showAnimationDuration,l=function(){Je("initialZoom"),i?(c.template.removeAttribute("style"),c.bg.removeAttribute("style")):(Pe(1),t&&(t.style.display="block"),a.addClass(n,"pswp--animated-in"),Te("initialZoom"+(i?"OutEnd":"InEnd"))),o&&o(),Ht=!1};if(!u||!r||void 0===r.x)return Te("initialZoom"+(i?"Out":"In")),C=e.initialZoomLevel,Ne(ge,e.initialPosition),Se(),n.style.opacity=i?0:1,Pe(1),void(u?setTimeout(function(){l()},u):l());!function(){var t=f,o=!c.currItem.src||c.currItem.loadError||d.showHideOpacity;e.miniImg&&(e.miniImg.style.webkitBackfaceVisibility="hidden"),i||(C=r.w/e.w,ge.x=r.x,ge.y=r.y-N,c[o?"template":"bg"].style.opacity=.001,Se()),Qe("initialZoom"),i&&!t&&a.removeClass(n,"pswp--animated-in"),o&&(i?a[(t?"remove":"add")+"Class"](n,"pswp--animate_opacity"):setTimeout(function(){a.addClass(n,"pswp--animate_opacity")},30)),Mt=setTimeout(function(){if(Te("initialZoom"+(i?"Out":"In")),i){var s=r.w/e.w,c={x:ge.x,y:ge.y},d=C,p=de,h=function(e){1===e?(C=s,ge.x=r.x,ge.y=r.y-j):(C=(s-d)*e+d,ge.x=(r.x-c.x)*e+c.x,ge.y=(r.y-j-c.y)*e+c.y),Se(),o?n.style.opacity=1-e:Pe(p-e*p)};t?tt("initialZoom",0,1,u,a.easing.cubic.out,h,l):(h(1),Mt=setTimeout(l,u+20))}else C=e.initialZoomLevel,Ne(ge,e.initialPosition),Se(),Pe(1),o?n.style.opacity=1:Pe(1),Mt=setTimeout(l,u+20)},i?25:90)}()},Gt={},Yt=[],Vt={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return jt.length}},Xt=function(t,n,i){var o=t.bounds;o.center.x=e((Gt.x-n)/2),o.center.y=e((Gt.y-i)/2)+t.vGap.top,o.max.x=n>Gt.x?e(Gt.x-n):o.center.x,o.max.y=i>Gt.y?e(Gt.y-i)+t.vGap.top:o.center.y,o.min.x=n>Gt.x?0:o.center.x,o.min.y=i>Gt.y?t.vGap.top:o.center.y},$t=function(e,t,n){if(e.src&&!e.loadError){var i=!n;if(i&&(!e.vGap&&(e.vGap={top:0,bottom:0}),Te("parseVerticalMargin",e)),Gt.x=t.x,Gt.y=t.y-e.vGap.top-e.vGap.bottom,i){var o=Gt.x/e.w,r=Gt.y/e.h;e.fitRatio=o<r?o:r;var u=d.scaleMode;"orig"===u?n=1:"fit"===u&&(n=e.fitRatio),1<n&&(n=1),e.initialZoomLevel=n,e.bounds||(e.bounds={center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}})}return n?(Xt(e,e.w*n,e.h*n),i&&n===e.initialZoomLevel&&(e.initialPosition=e.bounds.center),e.bounds):void 0}return e.w=e.h=0,e.initialZoomLevel=e.fitRatio=1,e.bounds={center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}},e.initialPosition=e.bounds.center,e.bounds},Jt=function(e,t,n,i,o,r){t.loadError||i&&(t.imageAppended=!0,tn(t,i,t===c.currItem&&Ae),n.appendChild(i),r&&setTimeout(function(){t&&t.loaded&&t.placeholder&&(t.placeholder.style.display="none",t.placeholder=null)},500))},Qt=function(e){e.loading=!0,e.loaded=!1;var t=e.img=a.createEl("pswp__img","img"),n=function(){e.loading=!1,e.loaded=!0,e.loadComplete?e.loadComplete(e):e.img=null,t.onload=t.onerror=null,t=null};return t.onload=n,t.onerror=function(){e.loadError=!0,n()},t.src=e.src,t},en=function(e,t){if(e.src&&e.loadError&&e.container)return t&&(e.container.innerHTML=""),e.container.innerHTML=d.errorMsg.replace("%url%",e.src),!0},tn=function(t,n,i){if(t.src){n||(n=t.container.lastChild);var o=i?t.w:e(t.w*t.fitRatio),r=i?t.h:e(t.h*t.fitRatio);t.placeholder&&!t.loaded&&(t.placeholder.style.width=o+"px",t.placeholder.style.height=r+"px"),n.style.width=o+"px",n.style.height=r+"px"}},nn=function(){if(Yt.length){for(var e,t=0;t<Yt.length;t++)(e=Yt[t]).holder.index===e.index&&Jt(e.index,e.item,e.baseDiv,e.img,0,e.clearPlaceholder);Yt=[]}};_e("Controller",{publicMethods:{lazyLoadItem:function(e){e=De(e);var t=Wt(e);t&&(!t.loaded&&!t.loading||_)&&(Te("gettingData",e,t),t.src&&Qt(t))},initController:function(){a.extend(d,Vt,!0),c.items=jt=o,Wt=c.getItemAt,Kt=d.getNumItemsFn,d.loop,3>Kt()&&(d.loop=!1),Oe("beforeChange",function(e){var t,n=d.preload,i=!(null!==e)||0<=e,o=u(n[0],Kt()),r=u(n[1],Kt());for(t=1;t<=(i?r:o);t++)c.lazyLoadItem(m+t);for(t=1;t<=(i?o:r);t++)c.lazyLoadItem(m-t)}),Oe("initialLayout",function(){c.currItem.initialLayout=d.getThumbBoundsFn&&d.getThumbBoundsFn(m)}),Oe("mainScrollAnimComplete",nn),Oe("initialZoomInEnd",nn),Oe("destroy",function(){for(var e,t=0;t<jt.length;t++)(e=jt[t]).container&&(e.container=null),e.placeholder&&(e.placeholder=null),e.img&&(e.img=null),e.preloader&&(e.preloader=null),e.loadError&&(e.loaded=e.loadError=!1);Yt=null})},getItemAt:function(e){return!!(0<=e)&&void 0!==jt[e]&&jt[e]},allowProgressiveImg:function(){return d.forceProgressiveLoading||!R||d.mouseUsed||1200<screen.width},setContent:function(e,t){d.loop&&(t=De(t));var n=c.getItemAt(e.index);n&&(n.container=null);var i,o=c.getItemAt(t);if(o){Te("gettingData",t,o),e.index=t,e.item=o;var r=o.container=a.createEl("pswp__zoom-wrap");if(!o.src&&o.html&&(o.html.tagName?r.appendChild(o.html):r.innerHTML=o.html),en(o),$t(o,ye),!o.src||o.loadError||o.loaded)o.src&&!o.loadError&&((i=a.createEl("pswp__img","img")).style.opacity=1,i.src=o.src,tn(o,i),Jt(0,o,r,i));else{if(o.loadComplete=function(n){if(p){if(e&&e.index===t){if(en(n,!0))return n.loadComplete=n.img=null,$t(n,ye),Re(n),void(e.index===m&&c.updateCurrZoomItem());n.imageAppended?!Ht&&n.placeholder&&(n.placeholder.style.display="none",n.placeholder=null):Z.transform&&(le||Ht)?Yt.push({item:n,baseDiv:r,img:n.img,index:t,holder:e,clearPlaceholder:!0}):Jt(0,n,r,n.img,0,!0)}n.loadComplete=null,n.img=null,Te("imageLoadComplete",t,n)}},a.features.transform){var u="pswp__img pswp__img--placeholder";u+=o.msrc?"":" pswp__img--placeholder--blank";var l=a.createEl(u,o.msrc?"img":"");o.msrc&&(l.src=o.msrc),tn(o,l),r.appendChild(l),o.placeholder=l}o.loading||Qt(o),c.allowProgressiveImg()&&(!Zt&&Z.transform?Yt.push({item:o,baseDiv:r,img:o.img,index:t,holder:e}):Jt(0,o,r,o.img,0,!0))}Zt||t!==m?Re(o):(ue=r.style,qt(o,i||o.img)),e.el.innerHTML="",e.el.appendChild(r)}else e.el.innerHTML=""},cleanSlide:function(e){e.img&&(e.img.onload=e.img.onerror=null),e.loaded=e.loading=e.img=e.imageAppended=!1}}});var on,rn,un={},ln=function(e,t,n){var i=document.createEvent("CustomEvent"),o={origEvent:e,target:e.target,releasePoint:t,pointerType:n||"touch"};i.initCustomEvent("pswpTap",!0,!0,o),e.target.dispatchEvent(i)};_e("Tap",{publicMethods:{initTap:function(){Oe("firstTouchStart",c.onTapStart),Oe("touchRelease",c.onTapRelease),Oe("destroy",function(){un={},on=null})},onTapStart:function(e){1<e.length&&(clearTimeout(on),on=null)},onTapRelease:function(e,t){if(t&&!Q&&!$&&!$e){var n=t;if(on&&(clearTimeout(on),on=null,function(e,t){return l(e.x-t.x)<25&&l(e.y-t.y)<25}(n,un)))return void Te("doubleTap",n);if("mouse"===t.type)return void ln(e,t,"mouse");if("BUTTON"===e.target.tagName.toUpperCase()||a.hasClass(e.target,"pswp__single-tap"))return void ln(e,t);Ne(un,n),on=setTimeout(function(){ln(e,t),on=null},300)}}}}),_e("DesktopZoom",{publicMethods:{initDesktopZoom:function(){M||(R?Oe("mouseUsed",function(){c.setupDesktopZoom()}):c.setupDesktopZoom(!0))},setupDesktopZoom:function(e){rn={};var t="wheel mousewheel DOMMouseScroll";Oe("bindEvents",function(){a.bind(n,t,c.handleMouseWheel)}),Oe("unbindEvents",function(){rn&&a.unbind(n,t,c.handleMouseWheel)}),c.mouseZoomedIn=!1;var i,o=function(){c.mouseZoomedIn&&(a.removeClass(n,"pswp--zoomed-in"),c.mouseZoomedIn=!1),1>C?a.addClass(n,"pswp--zoom-allowed"):a.removeClass(n,"pswp--zoom-allowed"),r()},r=function(){i&&(a.removeClass(n,"pswp--dragging"),i=!1)};Oe("resize",o),Oe("afterChange",o),Oe("pointerDown",function(){c.mouseZoomedIn&&(i=!0,a.addClass(n,"pswp--dragging"))}),Oe("pointerUp",r),e||o()},handleMouseWheel:function(e){if(C<=c.currItem.fitRatio)return d.modal&&(!d.closeOnScroll||$e||X?e.preventDefault():k&&2<l(e.deltaY)&&(f=!0,c.close())),!0;if(e.stopPropagation(),rn.x=0,"deltaX"in e)1===e.deltaMode?(rn.x=18*e.deltaX,rn.y=18*e.deltaY):(rn.x=e.deltaX,rn.y=e.deltaY);else if("wheelDelta"in e)e.wheelDeltaX&&(rn.x=-.16*e.wheelDeltaX),rn.y=e.wheelDeltaY?-.16*e.wheelDeltaY:-.16*e.wheelDelta;else{if(!("detail"in e))return;rn.y=e.detail}He(C,!0);var t=ge.x-rn.x,n=ge.y-rn.y;(d.modal||t<=re.min.x&&t>=re.max.x&&n<=re.min.y&&n>=re.max.y)&&e.preventDefault(),c.panTo(t,n)},toggleDesktopZoom:function(e){e=e||{x:ye.x/2+ve.x,y:ye.y/2+ve.y};var t=d.getDoubleTapZoom(!0,c.currItem),i=C===t;c.mouseZoomedIn=!i,c.zoomTo(i?c.currItem.initialZoomLevel:t,e,333),a[(i?"remove":"add")+"Class"](n,"pswp--zoomed-in")}}});var sn,an,cn,dn,pn,hn,fn,mn,gn,yn,En,vn,bn={history:!0,galleryUID:1},Cn=function(){return En.hash.substring(1)},wn=function(){sn&&clearTimeout(sn),cn&&clearTimeout(cn)},xn=function(){var e=Cn(),t={};if(5>e.length)return t;var n,i=e.split("&");for(n=0;n<i.length;n++)if(i[n]){var o=i[n].split("=");2>o.length||(t[o[0]]=o[1])}if(d.galleryPIDs){var r=t.pid;for(t.pid=0,n=0;n<jt.length;n++)if(jt[n].pid===r){t.pid=n;break}}else t.pid=parseInt(t.pid,10)-1;return 0>t.pid&&(t.pid=0),t},Fn=function(){if(cn&&clearTimeout(cn),$e||X)cn=setTimeout(Fn,500);else{dn?clearTimeout(an):dn=!0;var e=m+1,t=Wt(m);t.hasOwnProperty("pid")&&(e=t.pid);var n=fn+"&gid="+d.galleryUID+"&pid="+e;mn||-1!==En.hash.indexOf(n)||(yn=!0);var i=En.href.split("#")[0]+"#"+n;vn?"#"+n!==window.location.hash&&history[mn?"replaceState":"pushState"]("",document.title,i):mn?En.replace(i):En.hash=n,mn=!0,an=setTimeout(function(){dn=!1},60)}};_e("History",{publicMethods:{initHistory:function(){if(a.extend(d,bn,!0),d.history){En=window.location,yn=!1,gn=!1,mn=!1,fn=Cn(),vn="pushState"in history,-1<fn.indexOf("gid=")&&(fn=(fn=fn.split("&gid=")[0]).split("?gid=")[0]),Oe("afterChange",c.updateURL),Oe("unbindEvents",function(){a.unbind(window,"hashchange",c.onHashChange)});var e=function(){hn=!0,gn||(yn?history.back():fn?En.hash=fn:vn?history.pushState("",document.title,En.pathname+En.search):En.hash=""),wn()};Oe("unbindEvents",function(){f&&e()}),Oe("destroy",function(){hn||e()}),Oe("firstUpdate",function(){m=xn().pid});var t=fn.indexOf("pid=");-1<t&&("&"===(fn=fn.substring(0,t)).slice(-1)&&(fn=fn.slice(0,-1))),setTimeout(function(){p&&a.bind(window,"hashchange",c.onHashChange)},40)}},onHashChange:function(){return Cn()===fn?(gn=!0,void c.close()):void(!dn&&(pn=!0,c.goTo(xn().pid),pn=!1))},updateURL:function(){wn(),pn||(mn?sn=setTimeout(Fn,800):Fn())}}}),a.extend(c,{shout:Te,listen:Oe,viewportSize:ye,options:d,isMainScrollAnimating:function(){return le},getZoomLevel:function(){return C},getCurrentIndex:function(){return m},isDragging:function(){return X},isZooming:function(){return ie},setScrollOffset:function(e,t){ve.x=e,j=ve.y=t,Te("updateScrollOffset",ve)},applyZoomPan:function(e,t,n,i){ge.x=t,ge.y=n,C=e,Se(i)},init:function(){if(!p&&!h){var e;c.framework=a,c.template=n,c.bg=a.getChildByClass(n,"pswp__bg"),z=n.className,p=!0,Z=a.detectFeatures(),L=Z.raf,U=Z.caf,k=Z.transform,M=Z.oldIE,c.scrollWrap=a.getChildByClass(n,"pswp__scroll-wrap"),c.container=a.getChildByClass(c.scrollWrap,"pswp__container"),g=c.container.style,c.itemHolders=D=[{el:c.container.children[0],wrap:0,index:-1},{el:c.container.children[1],wrap:0,index:-1},{el:c.container.children[2],wrap:0,index:-1}],D[0].el.style.display=D[2].el.style.display="none",function(){if(k){var e=Z.perspective&&!R;return x="translate"+(e?"3d(":"("),void(F=Z.perspective?", 0px)":")")}k="left",a.addClass(n,"pswp--ie"),Le=function(e,t){t.left=e+"px"},Re=function(e){var t=1<e.fitRatio?1:e.fitRatio,n=e.container.style,i=t*e.w,o=t*e.h;n.width=i+"px",n.height=o+"px",n.left=e.initialPosition.x+"px",n.top=e.initialPosition.y+"px"},Se=function(){if(ue){var e=ue,t=c.currItem,n=1<t.fitRatio?1:t.fitRatio,i=n*t.w,o=n*t.h;e.width=i+"px",e.height=o+"px",e.left=ge.x+"px",e.top=ge.y+"px"}}}(),b={resize:c.updateSize,orientationchange:function(){clearTimeout(H),H=setTimeout(function(){ye.x!==c.scrollWrap.clientWidth&&c.updateSize()},500)},scroll:Ve,keydown:Ge,click:Ye};var t=Z.isOldIOSPhone||Z.isOldAndroid||Z.isMobileOpera;for(Z.animationName&&Z.transform&&!t||(d.showAnimationDuration=d.hideAnimationDuration=0),e=0;e<xe.length;e++)c["init"+xe[e]]();if(i)(c.ui=new i(c,a)).init();Te("firstUpdate"),m=m||d.index||0,(isNaN(m)||0>m||m>=Kt())&&(m=0),c.currItem=Wt(m),(Z.isOldIOSPhone||Z.isOldAndroid)&&(we=!1),n.setAttribute("aria-hidden","false"),d.modal&&(we?n.style.position="fixed":(n.style.position="absolute",n.style.top=a.getScrollY()+"px")),void 0===j&&(Te("initialLayout"),j=N=a.getScrollY());var o="pswp--open ";for(d.mainClass&&(o+=d.mainClass+" "),d.showHideOpacity&&(o+="pswp--animate_opacity "),o+=R?"pswp--touch":"pswp--notouch",o+=Z.animationName?" pswp--css_animation":"",o+=Z.svg?" pswp--svg":"",a.addClass(n,o),c.updateSize(),y=-1,Ce=null,e=0;e<3;e++)Le((e+y)*be.x,D[e].el.style);M||a.bind(c.scrollWrap,v,c),Oe("initialZoomInEnd",function(){c.setContent(D[0],m-1),c.setContent(D[2],m+1),D[0].el.style.display=D[2].el.style.display="block",d.focus&&n.focus(),a.bind(document,"keydown",c),Z.transform&&a.bind(c.scrollWrap,"click",c),d.mouseUsed||a.bind(document,"mousemove",Ze),a.bind(window,"resize scroll orientationchange",c),Te("bindEvents")}),c.setContent(D[1],m),c.updateCurrItem(),Te("afterInit"),we||(A=setInterval(function(){$e||X||ie||C!==c.currItem.initialZoomLevel||c.updateSize()},1e3)),a.addClass(n,"pswp--visible")}},close:function(){p&&(p=!1,h=!0,Te("close"),a.unbind(window,"resize scroll orientationchange",c),a.unbind(window,"scroll",b.scroll),a.unbind(document,"keydown",c),a.unbind(document,"mousemove",Ze),Z.transform&&a.unbind(c.scrollWrap,"click",c),X&&a.unbind(window,E,c),clearTimeout(H),Te("unbindEvents"),qt(c.currItem,null,!0,c.destroy))},destroy:function(){Te("destroy"),Mt&&clearTimeout(Mt),n.setAttribute("aria-hidden","true"),n.className=z,A&&clearInterval(A),a.unbind(c.scrollWrap,v,c),a.unbind(window,"scroll",c),Et(),et(),Ie=null},panTo:function(e,t,n){n||(e>re.min.x?e=re.min.x:e<re.max.x&&(e=re.max.x),t>re.min.y?t=re.min.y:t<re.max.y&&(t=re.max.y)),ge.x=e,ge.y=t,Se()},handleEvent:function(e){e=e||window.event,b[e.type]&&b[e.type](e)},goTo:function(e){var t=(e=De(e))-m;Ce=t,m=e,c.currItem=Wt(m),Ee-=t,Ue(be.x*Ee),et(),le=!1,c.updateCurrItem()},next:function(){c.goTo(m+1)},prev:function(){c.goTo(m-1)},updateCurrZoomItem:function(e){if(e&&Te("beforeChange",0),D[1].el.children.length){var t=D[1].el.children[0];ue=a.hasClass(t,"pswp__zoom-wrap")?t.style:null}else ue=null;re=c.currItem.bounds,w=C=c.currItem.initialZoomLevel,ge.x=re.center.x,ge.y=re.center.y,e&&Te("afterChange")},invalidateCurrItems:function(){_=!0;for(var e=0;e<3;e++)D[e].item&&(D[e].item.needsUpdate=!0)},updateCurrItem:function(e){if(0!==Ce){var t,n=l(Ce);if(!(e&&2>n)){c.currItem=Wt(m),Ae=!1,Te("beforeChange",Ce),n>=3&&(y+=Ce+(0<Ce?-3:3),n=3);for(var i=0;i<n;i++)0<Ce?(t=D.shift(),D[2]=t,Le((++y+2)*be.x,t.el.style),c.setContent(t,m-n+i+1+1)):(t=D.pop(),D.unshift(t),Le(--y*be.x,t.el.style),c.setContent(t,m+n-i-1-1));if(ue&&1===l(Ce)){var o=Wt(I);o.initialZoomLevel!==C&&($t(o,ye),tn(o),Re(o))}Ce=0,c.updateCurrZoomItem(),I=m,Te("afterChange")}}},updateSize:function(t){if(!we&&d.modal){var i=a.getScrollY();if(j!==i&&(n.style.top=i+"px",j=i),!t&&Fe.x===window.innerWidth&&Fe.y===window.innerHeight)return;Fe.x=window.innerWidth,Fe.y=window.innerHeight,n.style.height=Fe.y+"px"}if(ye.x=c.scrollWrap.clientWidth,ye.y=c.scrollWrap.clientHeight,Ve(),be.x=ye.x+e(ye.x*d.spacing),be.y=ye.y,Ue(be.x*Ee),Te("beforeResize"),void 0!==y){for(var o,r,u,l=0;l<3;l++)o=D[l],Le((l+y)*be.x,o.el.style),u=m+l-1,d.loop&&2<Kt()&&(u=De(u)),(r=Wt(u))&&(_||r.needsUpdate||!r.bounds)?(c.cleanSlide(r),c.setContent(o,u),1===l&&(c.currItem=r,c.updateCurrZoomItem(!0)),r.needsUpdate=!1):-1===o.index&&0<=u&&c.setContent(o,u),r&&r.container&&($t(r,ye),tn(r),Re(r));_=!1}w=C=c.currItem.initialZoomLevel,(re=c.currItem.bounds)&&(ge.x=re.center.x,ge.y=re.center.y,Se(!0)),Te("resize")},zoomTo:function(e,t,n,i,o){t&&(w=C,mt.x=l(t.x)-ge.x,mt.y=l(t.y)-ge.y,Ne(me,ge));var r=He(e,!1),u={};qe("x",r,u,e),qe("y",r,u,e);var s=C,c=ge.x,d=ge.y;Me(u);var p=function(t){1===t?(C=e,ge.x=u.x,ge.y=u.y):(C=(e-s)*t+s,ge.x=(u.x-c)*t+c,ge.y=(u.y-d)*t+d),o&&o(t),Se(1===t)};n?tt("customZoomTo",0,1,n,i||a.easing.sine.inOut,p):p(1)}})}})},function(t,n,i){var o,r,u;u=function(){"use strict";return function(t,n){var i,o,r,u,l,s,a,c,d,p,h,f,m,g,y,E,v,b,C=this,w=!1,x=!0,F=!0,A={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){return e.title?(t.children[0].innerHTML=e.title,!0):(t.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return t.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return t.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},_=function(e){if(E)return!0;e=e||window.event,y.timeToIdle&&y.mouseUsed&&!d&&L();for(var t,i,o=(e.target||e.srcElement).getAttribute("class")||"",r=0;r<M.length;r++)(t=M[r]).onTap&&-1<o.indexOf("pswp__"+t.name)&&(t.onTap(),i=!0);if(i){e.stopPropagation&&e.stopPropagation(),E=!0;var u=n.features.isOldAndroid?600:30;setTimeout(function(){E=!1},u)}},D=function(){return!t.likelyTouchDevice||y.mouseUsed||screen.width>y.fitControlsWidth},I=function(e,t,i){n[(i?"add":"remove")+"Class"](e,"pswp__"+t)},O=function(){var e=1===y.getNumItemsFn();e!==g&&(I(o,"ui--one-slide",e),g=e)},T=function(){I(a,"share-modal--hidden",F)},B=function(){return(F=!F)?(n.removeClass(a,"pswp__share-modal--fade-in"),setTimeout(function(){F&&T()},300)):(T(),setTimeout(function(){F||n.addClass(a,"pswp__share-modal--fade-in")},30)),F||k(),!1},P=function(n){var i=(n=n||window.event).target||n.srcElement;return!(t.shout("shareLinkClick",n,i),!i.href||!i.hasAttribute("download")&&(window.open(i.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?e(screen.width/2-275):100)),F||B(),1))},k=function(){for(var e,t,n,i,o="",r=0;r<y.shareButtons.length;r++)e=y.shareButtons[r],t=y.getImageURLForShare(e),n=y.getPageURLForShare(e),i=y.getTextForShare(e),o+='<a href="'+e.url.replace("{{url}}",encodeURIComponent(n)).replace("{{image_url}}",encodeURIComponent(t)).replace("{{raw_image_url}}",t).replace("{{text}}",encodeURIComponent(i))+'" target="_blank" class="pswp__share--'+e.id+'"'+(e.download?"download":"")+">"+e.label+"</a>",y.parseShareButtonOut&&(o=y.parseShareButtonOut(e,o));a.children[0].innerHTML=o,a.children[0].onclick=P},S=function(e){for(var t=0;t<y.closeElClasses.length;t++)if(n.hasClass(e,"pswp__"+y.closeElClasses[t]))return!0},R=0,L=function(){clearTimeout(b),R=0,d&&C.setIdle(!1)},U=function(e){var t=(e=e||window.event).relatedTarget||e.toElement;t&&"HTML"!==t.nodeName||(clearTimeout(b),b=setTimeout(function(){C.setIdle(!0)},y.timeToIdleOutside))},z=function(e){f!==e&&(I(h,"preloader--active",!e),f=e)},N=function(e){var t=e.vGap;if(D()){var i=y.barsSize;if(y.captionEl&&"auto"===i.bottom)if(u||((u=n.createEl("pswp__caption pswp__caption--fake")).appendChild(n.createEl("pswp__caption__center")),o.insertBefore(u,r),n.addClass(o,"pswp__ui--fit")),y.addCaptionHTMLFn(e,u,!0)){var l=u.clientHeight;t.bottom=parseInt(l,10)||44}else t.bottom=i.top;else t.bottom="auto"===i.bottom?0:i.bottom;t.top=i.top}else t.top=t.bottom=0},M=[{name:"caption",option:"captionEl",onInit:function(e){r=e}},{name:"share-modal",option:"shareEl",onInit:function(e){a=e},onTap:function(){B()}},{name:"button--share",option:"shareEl",onInit:function(e){s=e},onTap:function(){B()}},{name:"button--zoom",option:"zoomEl",onTap:t.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){l=e}},{name:"button--close",option:"closeEl",onTap:t.close},{name:"button--arrow--left",option:"arrowEl",onTap:t.prev},{name:"button--arrow--right",option:"arrowEl",onTap:t.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){i.isFullscreen()?i.exit():i.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(e){h=e}}];C.init=function(){n.extend(t.options,A,!0),y=t.options,o=n.getChildByClass(t.scrollWrap,"pswp__ui"),p=t.listen,function(){var e;p("onVerticalDrag",function(e){x&&.95>e?C.hideControls():!x&&.95<=e&&C.showControls()}),p("onPinchClose",function(t){x&&.9>t?(C.hideControls(),e=!0):e&&!x&&.9<t&&C.showControls()}),p("zoomGestureEnded",function(){(e=!1)&&!x&&C.showControls()})}(),p("beforeChange",C.update),p("doubleTap",function(e){var n=t.currItem.initialZoomLevel;t.getZoomLevel()===n?t.zoomTo(y.getDoubleTapZoom(!1,t.currItem),e,333):t.zoomTo(n,e,333)}),p("preventDragEvent",function(e,t,n){var i=e.target||e.srcElement;i&&i.getAttribute("class")&&-1<e.type.indexOf("mouse")&&(0<i.getAttribute("class").indexOf("__caption")||/(SMALL|STRONG|EM)/i.test(i.tagName))&&(n.prevent=!1)}),p("bindEvents",function(){n.bind(o,"pswpTap click",_),n.bind(t.scrollWrap,"pswpTap",C.onGlobalTap),t.likelyTouchDevice||n.bind(t.scrollWrap,"mouseover",C.onMouseOver)}),p("unbindEvents",function(){F||B(),v&&clearInterval(v),n.unbind(document,"mouseout",U),n.unbind(document,"mousemove",L),n.unbind(o,"pswpTap click",_),n.unbind(t.scrollWrap,"pswpTap",C.onGlobalTap),n.unbind(t.scrollWrap,"mouseover",C.onMouseOver),i&&(n.unbind(document,i.eventK,C.updateFullscreen),i.isFullscreen()&&(y.hideAnimationDuration=0,i.exit()),i=null)}),p("destroy",function(){y.captionEl&&(u&&o.removeChild(u),n.removeClass(r,"pswp__caption--empty")),a&&(a.children[0].onclick=null),n.removeClass(o,"pswp__ui--over-close"),n.addClass(o,"pswp__ui--hidden"),C.setIdle(!1)}),y.showAnimationDuration||n.removeClass(o,"pswp__ui--hidden"),p("initialZoomIn",function(){y.showAnimationDuration&&n.removeClass(o,"pswp__ui--hidden")}),p("initialZoomOut",function(){n.addClass(o,"pswp__ui--hidden")}),p("parseVerticalMargin",N),function(){var e,t,i,r=function(o){if(o)for(var r=o.length,u=0;u<r;u++){e=o[u],t=e.className;for(var l=0;l<M.length;l++)i=M[l],-1<t.indexOf("pswp__"+i.name)&&(y[i.option]?(n.removeClass(e,"pswp__element--disabled"),i.onInit&&i.onInit(e)):n.addClass(e,"pswp__element--disabled"))}};r(o.children);var u=n.getChildByClass(o,"pswp__top-bar");u&&r(u.children)}(),y.shareEl&&s&&a&&(F=!0),O(),y.timeToIdle&&p("mouseUsed",function(){n.bind(document,"mousemove",L),n.bind(document,"mouseout",U),v=setInterval(function(){2==++R&&C.setIdle(!0)},y.timeToIdle/2)}),y.fullscreenEl&&!n.features.isOldAndroid&&(!i&&(i=C.getFullscreenAPI()),i?(n.bind(document,i.eventK,C.updateFullscreen),C.updateFullscreen(),n.addClass(t.template,"pswp--supports-fs")):n.removeClass(t.template,"pswp--supports-fs")),y.preloaderEl&&(z(!0),p("beforeChange",function(){clearTimeout(m),m=setTimeout(function(){t.currItem&&t.currItem.loading?(!t.allowProgressiveImg()||t.currItem.img&&!t.currItem.img.naturalWidth)&&z(!1):z(!0)},y.loadingIndicatorDelay)}),p("imageLoadComplete",function(e,n){t.currItem===n&&z(!0)}))},C.setIdle=function(e){d=e,I(o,"ui--idle",e)},C.update=function(){x&&t.currItem?(C.updateIndexIndicator(),y.captionEl&&(y.addCaptionHTMLFn(t.currItem,r),I(r,"caption--empty",!t.currItem.title)),w=!0):w=!1,F||B(),O()},C.updateFullscreen=function(e){e&&setTimeout(function(){t.setScrollOffset(0,n.getScrollY())},50),n[(i.isFullscreen()?"add":"remove")+"Class"](t.template,"pswp--fs")},C.updateIndexIndicator=function(){y.counterEl&&(l.innerHTML=t.getCurrentIndex()+1+y.indexIndicatorSep+y.getNumItemsFn())},C.onGlobalTap=function(e){var i=(e=e||window.event).target||e.srcElement;if(!E)if(e.detail&&"mouse"===e.detail.pointerType){if(S(i))return void t.close();n.hasClass(i,"pswp__img")&&(1===t.getZoomLevel()&&t.getZoomLevel()<=t.currItem.fitRatio?y.clickToCloseNonZoomable&&t.close():t.toggleDesktopZoom(e.detail.releasePoint))}else if(y.tapToToggleControls&&(x?C.hideControls():C.showControls()),y.tapToClose&&(n.hasClass(i,"pswp__img")||S(i)))return void t.close()},C.onMouseOver=function(e){var t=(e=e||window.event).target||e.srcElement;I(o,"ui--over-close",S(t))},C.hideControls=function(){n.addClass(o,"pswp__ui--hidden"),x=!1},C.showControls=function(){x=!0,w||C.update(),n.removeClass(o,"pswp__ui--hidden")},C.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)},C.getFullscreenAPI=function(){var e,n=document.documentElement,i="fullscreenchange";return n.requestFullscreen?e={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:i}:n.mozRequestFullScreen?e={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+i}:n.webkitRequestFullscreen?e={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+i}:n.msRequestFullscreen&&(e={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),e&&(e.enter=function(){return c=y.closeOnScroll,y.closeOnScroll=!1,"webkitRequestFullscreen"===this.enterK?void t.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT):t.template[this.enterK]()},e.exit=function(){return y.closeOnScroll=c,document[this.exitK]()},e.isFullscreen=function(){return document[this.elementK]}),e}}},void 0===(r="function"==typeof(o=u)?o.call(n,i,n,t):o)||(t.exports=r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=function(){function e(e){this._collection=null,this._filters=[],this.gallery=e}return e.prototype.addFilter=function(e){this.filters.push(e)},e.prototype.refresh=function(){this.filters.forEach(function(e){e.render()})},e.prototype.render=function(){var e=document.createElement("div");i.Utility.addClass(e,"natural-gallery-images sectionContainer"),e.appendChild(i.Utility.getIcon("icon-pict"));var t=document.createElement("div");i.Utility.addClass(t,"sectionName"),t.textContent=this.gallery.options.labelImages,e.appendChild(t);var n=document.createElement("span");e.appendChild(n),i.Utility.addClass(n,"natural-gallery-visible");var o=document.createElement("span");o.textContent=" / ",e.appendChild(o);var r=document.createElement("span");return i.Utility.addClass(r,"natural-gallery-total"),e.appendChild(r),this.element=document.createElement("div"),this.filters.forEach(function(e){this.element.appendChild(e.render())},this),i.Utility.addClass(this.element,"natural-gallery-header"),this.element.appendChild(e),this.element},e.prototype.isFiltered=function(){return null!==this.collection},e.prototype.filter=function(){var e=null;this.filters.forEach(function(t){t.isActive()&&(e=null==e?t.collection:i.Utility.intersectionBy(e,t.collection,"id"))}),this.collection=e,this.gallery.refresh()},Object.defineProperty(e.prototype,"collection",{get:function(){return this._collection},set:function(e){this._collection=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this._element},set:function(e){this._element=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gallery",{get:function(){return this._gallery},set:function(e){this._gallery=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filters",{get:function(){return this._filters},set:function(e){this._filters=e},enumerable:!0,configurable:!0}),e}();t.Header=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e=document.createElement("div");o.Utility.addClass(e,"natural-gallery-searchTerm sectionContainer"),e.appendChild(o.Utility.getIcon("icon-search")),e.appendChild(this.getInput());var t=document.createElement("label");o.Utility.addClass(t,"sectionName"),t.textContent=this.header.gallery.options.labelSearch,e.appendChild(t);var n=document.createElement("span");return o.Utility.addClass(n,"bar"),e.appendChild(n),e},t.prototype.getInput=function(){var e=this,t=document.createElement("input");return t.setAttribute("required",""),t.addEventListener("keyup",function(t){27===t.keyCode&&(this.value=""),e.filter(this.value)}),t},t.prototype.filter=function(e){this.collection=null;var t=o.Utility.removeDiacritics(e).toLowerCase();0<t.length&&(this.collection=[],this.header.gallery.getOriginalCollection().forEach(function(e){-1!==o.Utility.removeDiacritics(e.title+" "+(e.description?e.description:"")).toLowerCase().search(t)&&this.collection.push(e)},this)),this.header.filter()},t}(n(1).AbstractFilter);t.SearchFilter=r},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),r=n(12),u=n(0),l=function(e){function t(t){var n=e.call(this,t)||this;return n.header=t,n._categories=[],n}return i(t,e),Object.defineProperty(t.prototype,"element",{get:function(){return this._element},set:function(e){this._element=e},enumerable:!0,configurable:!0}),t.prototype.render=function(){if(this.prepare(),this.element)for(var e=this.element.getElementsByTagName("label"),t=e.length-1;0<t;t--)this.element.removeChild(e.item(t));else{this.element=document.createElement("div"),u.Utility.addClass(this.element,"natural-gallery-categories sectionContainer");var n=document.createElement("div");u.Utility.addClass(n,"sectionName"),n.textContent=this.header.gallery.options.labelCategories,this.element.appendChild(n)}var i=this.element.getElementsByTagName("label")[0];return i&&i.parentNode.removeChild(i),this.categories.forEach(function(e){this.element.appendChild(e.render())},this),this.element},t.prototype.prepare=function(){var e=[];this.header.gallery.categories.forEach(function(t){e.push(new r.Category(t.id,t.title,this))},this),this.none=new r.Category(-1,this.header.gallery.options.labelNone,this),this.others=new r.Category(-2,this.header.gallery.options.labelOthers,this),this.header.gallery.options.showNone&&e.length&&e.push(this.none),this.header.gallery.options.showOthers&&e.length&&e.push(this.others);var t=[];this.header.gallery.getOriginalCollection().forEach(function(n){(!n.categories||n.categories&&0===n.categories.length&&this.header.gallery.options.showNone)&&(n.categories=[this.none]),e.length&&u.Utility.differenceBy(n.categories,e,"id").length===n.categories.length&&this.header.gallery.options.showOthers&&(n.categories=[this.others]),n.categories.forEach(function(e){t.push(new r.Category(e.id,e.title,this))},this)},this),e=u.Utility.uniqBy(e,"id"),t=u.Utility.uniqBy(t,"id"),this.categories=e.length?u.Utility.intersectionBy(e,t,"id"):t},t.prototype.filter=function(){var e=this.categories.filter(function(e){return e.isActive});if(e.length===this.categories.length)this.collection=null;else if(0===e.length)this.collection=[];else{var t=[];this.header.gallery.getOriginalCollection().forEach(function(n){!n.categories||n.categories&&0===n.categories.length?this.none&&t.push(n):n.categories.some(function(i){if(e.some(function(e){return i.id===e.id}))return t.push(n),!0})},this),this.collection=t}this.header.filter()},Object.defineProperty(t.prototype,"categories",{get:function(){return this._categories},set:function(e){this._categories=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"others",{get:function(){return this._others},set:function(e){this._others=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"none",{get:function(){return this._none},set:function(e){this._none=e},enumerable:!0,configurable:!0}),t}(o.AbstractFilter);t.CategoryFilter=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=function(){function e(e,t,n){this.filter=n,this._isActive=!0,this.id=e,this.title=t}return e.prototype.render=function(){var e=this;this.element=document.createElement("label");var t=document.createElement("input");t.setAttribute("type","checkbox"),t.setAttribute("checked","checked"),t.addEventListener("change",function(){e.isActive=!e.isActive,e.filter.filter()}),this.element.appendChild(t);var n=document.createElement("span");n.textContent=this.title;var o=document.createElement("span");i.Utility.addClass(o,"label"),o.appendChild(i.Utility.getIcon("icon-category")),o.appendChild(n),this.element.appendChild(o);var r=document.createElement("span");return i.Utility.addClass(r,"bar"),this.element.appendChild(r),this.element},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this._title},set:function(e){this._title=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},set:function(e){this._isActive=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this._element},set:function(e){this._element=e},enumerable:!0,configurable:!0}),e}();t.Category=o},function(t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),function(t){var i=Math.ceil;t.organize=function(e){"natural"===e.options.format?this.organizeNatural(e.collection,e.bodyWidth,e.options.rowHeight,e.options.margin):"square"===e.options.format&&e.options.imagesPerRow?this.organizeSquareByImagesPerRow(e.collection,e.bodyWidth,e.options.imagesPerRow,e.options.margin):"square"===e.options.format&&e.options.rowHeight&&this.organizeSquareByRowHeight(e.collection,e.bodyWidth,e.options.rowHeight,e.options.margin),e.style()},t.simulatePagination=function(e){var t=e.options.margin?e.options.margin:0,n=i(e.options.rowHeight*e.defaultImageRatio+t),o=(e.bodyWidth+t)/(n+t);return i(o)},t.organizeSquareByRowHeight=function(t,o,r,u){u||(u=0);for(var l,s=i((o+u)/(r+u)),a=e((o+u-s*u)/s),c=o-s*a-(s-1)*u,d=0;d<t.length;d++)(l=t[d]).last=d%s==s-1,l.row=n(d/s),l.width=n(a),l.height=n(a),l.last&&(l.width=n(a+c))},t.organizeSquareByImagesPerRow=function(e,t,i,o){o||(o=0),i||(i=4);for(var r,u=(t-(i-1)*o)/i,l=0;l<e.length;l++)(r=e[l]).width=n(u),r.height=n(u),r.last=l%i==i-1,r.row=n(l/i)},t.organizeNatural=function(e,t,n,i,o){void 0===o&&(o=null),o||(o=0),i||(i=0),n||(n=300);for(var r=1;r<=e.length;r++){var u=e.slice(0,r);if(this.getRowWidth(n,i,u)>=t){this.computeSizes(u,t,i,o),this.organizeNatural(e.slice(r),t,n,i,o+1);break}if(r===e.length){this.computeSizes(u,null,i,o,n);break}}},t.computeSizes=function(t,i,o,r,u){void 0===u&&(u=null);for(var l=i?this.getRowHeight(i,o,t):u,s=this.getRowWidth(l,o,t),a=i?this.apportionExcess(t,i,s):0,c=0,d=0;d<t.length;d++){var p=t[d],h=this.getImageRatio(p)*l-a;c+=h-n(h),h=n(h),(1<=c||d===t.length-1&&1===e(c))&&(h++,c--),p.width=h,p.height=n(l),p.row=r,p.last=d===t.length-1}},t.getRowWidth=function(e,t,n){return t*(n.length-1)+this.getRatios(n)*e},t.getRowHeight=function(e,t,n){return e/this.getRatios(n)+t*(n.length-1)},t.getRatios=function(e){for(var t=0,n=0;n<e.length;n++)t+=this.getImageRatio(e[n]);return t},t.getImageRatio=function(e){return+e.tWidth/+e.tHeight},t.apportionExcess=function(e,t,n){return(n-t)/e.length}}(i.Organizer||(i.Organizer={}))}])});