<!DOCTYPE html><html class="html-loading"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>docker-composeçš„ä½¿ç”¨æ–¹æ³• | Howard-Blogs</title><meta name="author" content="Howard Yin"><meta name="keywords" content><meta name="description" content><link rel="shortcut icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="/css/Annie.css"><script src="/js/jquery.min.js"></script><script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script><script src="/js/leancloud.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.css"></head><body><div id="preloader"><div class="pre-container"><div class="spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div></div></div><header class="fixbackground" data-img-mode="normal" data-normal-src="/img/1.jpg" data-random-max="110" data-random-src="https://sariay.github.io/Random-img/"><div class="mask"><div class="h-header"><div id="logo"><a href="/"><img src="/img/logo.png" alt="Logo"></a></div><div id="navigation-show"><ul><li class="menu-home"><a href="/" class="menu-item-home">ä¸»é¡µ</a></li><li class="menu-archive"><a href="/archives" class="menu-item-archive">å½’æ¡£</a></li><li class="menu-categories"><a href="/categories" class="menu-item-categories">åˆ†ç±»</a></li><li class="menu-tags"><a href="/tags" class="menu-item-tags">æ ‡ç­¾</a></li><li class="menu-about"><a href="/about" class="menu-item-about">å…³äº</a></li><li class="menu-gallery"><a href="/gallery" class="menu-item-gallery">ç›¸å†Œ</a></li></ul></div></div><div class="h-body"><p class="motto"></p></div><div class="h-footer"><a href="javascript:;" id="read-more"><i class="fa fa-angle-double-down" aria-hidden="true"></i></a><style type="text/css">.header-date{font-size:1.6rem;color:#fff;position:absolute;bottom:5px;right:1rem;writing-mode:tb-rl}.header-date a{border-bottom:none}@media only screen and (max-width:768){.header-date{font-size:1rem}}</style><div class="header-date"><a href="https://time.is/Beijing" id="time_is_link" rel="nofollow"></a> <span id="Beijing_z43d"></span></div><script src="//widget.time.is/zh.js"></script><script>time_is_widget.init({Beijing_z43d:{template:"DATE",date_format:"yearå¹´ monthnumæœˆ dnumæ—¥"}})</script></div></div></header><div id="navigation-hide"><div id="progress-bar"></div><div id="progress-percentage"><h1>0.0%</h1></div><div class="toc-switch"><span class="switch-button">ç›®å½•</span></div><p>å½“å‰æ–‡ç« &nbsp;:&nbsp;ã€Šdocker-composeçš„ä½¿ç”¨æ–¹æ³•ã€‹</p><a class="nav-trigger"><span></span></a></div><nav class="nav-container" id="cd-nav"><div class="nav-header"><h3>Navigation</h3><a href="javascript:;" class="nav-close"></a></div><div class="nav-body"><ul><li class="menu-home"><a href="/" class="menu-item-home">ä¸»é¡µ</a></li><li class="menu-archive"><a href="/archives" class="menu-item-archive">å½’æ¡£</a></li><li class="menu-categories"><a href="/categories" class="menu-item-categories">åˆ†ç±»</a></li><li class="menu-tags"><a href="/tags" class="menu-item-tags">æ ‡ç­¾</a></li><li class="menu-about"><a href="/about" class="menu-item-about">å…³äº</a></li><li class="menu-gallery"><a href="/gallery" class="menu-item-gallery">ç›¸å†Œ</a></li></ul></div><div class="nav-footer"><ul><li><a href="http://github.com/yindaheng98" target="_blank"><i class="fa fa-github"></i></a></li><li><a href="http://github.com/yindaheng98" target="_blank"><i class="fa fa-weibo"></i></a></li><li><a href="http://github.com/yindaheng98" target="_blank"><i class="fa fa-pinterest"></i></a></li><li><a href="http://github.com/yindaheng98" target="_blank"><i class="fa fa-instagram"></i></a></li><li><a href="http://github.com/yindaheng98" target="_blank"><i class="fa fa-twitter"></i></a></li><li><a href="/atom.xml" target="_blank"><i class="fa fa-rss"></i></a></li></ul></div></nav><main><div class="layout-toc"><div id="layout-toc"><div class="k-catelog-list" id="catelog-list" data-title="æ–‡ç« ç›®å½•"></div></div></div><script src="/plugin/toc/katelog.min.js"></script><div class="layout-post"><div id="layout-post"><div class="article-title"><i class="fa fa-paper-plane-o" aria-hidden="true"></i> <a href="/Docker/docker-compose.html" itemprop="url">docker-composeçš„ä½¿ç”¨æ–¹æ³•</a></div><div class="article-meta"><span><i class="fa fa-calendar"></i> å‘å¸ƒäº <a href="/Docker/docker-compose.html" itemprop="url"><time datetime="2019-10-07T13:37:55.000Z" itemprop="datePublished">2019-10-07 </time></a>&nbsp; æ›´æ–°äº <a href="/Docker/docker-compose.html" itemprop="url"><time datetime="2019-10-07T13:37:55.000Z" itemprop="dateUpdated">2020-06-24</time></a> </span><span><i class="fa fa-tags"></i> <a href="/tags/Docker/">Docker </a><a href="/tags/docker-compose/">docker-compose</a></span></div><div class="article-content" id="article-content"><p><a href="https://www.jianshu.com/p/658911a8cff3" target="_blank" rel="noopener">å…ˆæ¥ä¸€ä¸ªè®²çš„æ¯”è¾ƒå¥½çš„åšæ–‡</a></p><h2 id="ä»€ä¹ˆç©æ„"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆç©æ„"></a> ä»€ä¹ˆç©æ„</h2><p>å‰é¢æˆ‘ä»¬ä½¿ç”¨ Docker çš„æ—¶å€™ï¼Œå®šä¹‰Dockerfileæ–‡ä»¶ï¼Œç„¶åä½¿ç”¨docker buildã€docker runç­‰å‘½ä»¤æ“ä½œå®¹å™¨ã€‚ç„¶è€Œå¾®æœåŠ¡æ¶æ„çš„åº”ç”¨ç³»ç»Ÿä¸€èˆ¬åŒ…å«è‹¥å¹²ä¸ªå¾®æœåŠ¡ï¼Œæ¯”å¦‚å¯èƒ½è¦æœ‰LAMP+redis+node+python+go+â€¦æ¯ä¸ªå¾®æœåŠ¡ä¸€èˆ¬éƒ½ä¼šéƒ¨ç½²å¤šä¸ªå®ä¾‹ï¼Œå¦‚æœæ¯ä¸ªå¾®æœåŠ¡éƒ½è¦æ‰‹åŠ¨å¯åœï¼Œé‚£ä¹ˆæ•ˆç‡ä¹‹ä½ï¼Œç»´æŠ¤é‡ä¹‹å¤§å¯æƒ³è€ŒçŸ¥ã€‚æ‰€ä»¥å°±æœ‰docker-composeè¿™ç§æ¯”docker imageæ›´ä¸Šä¸€å±‚çš„å·¥å…·ã€‚</p><p>docker-composeåŸºæœ¬å°±æ˜¯ä¸€ä¸ªæ“ä½œdocker imageçš„è„šæœ¬ï¼Œå‘Šè¯‰è®¡ç®—æœºè¦æ€ä¹ˆç”¨docker imageæ„å»ºä¸€ä¸ªå¾®æœåŠ¡ç³»ç»Ÿã€‚</p><h2 id="å®‰è£…docker-compose"><a class="markdownIt-Anchor" href="#å®‰è£…docker-compose"></a> å®‰è£…docker-compose</h2><p>windowsä¸Šé¢è£…äº†docker-desktopå°±æœ‰docker-composeäº†ã€‚Linuxä¸Šé¢çš„docker-composeå®‰è£…è‡ªå·±æ‰¾æ•™ç¨‹ã€‚</p><pre><code>docker-compose -v
</code></pre><p>ç¡®è®¤ä¸€ä¸‹ğŸ‘†</p><h2 id="æ¦‚å¿µå·¥ç¨‹-æœåŠ¡-å®¹å™¨"><a class="markdownIt-Anchor" href="#æ¦‚å¿µå·¥ç¨‹-æœåŠ¡-å®¹å™¨"></a> æ¦‚å¿µï¼šå·¥ç¨‹ã€æœåŠ¡ã€å®¹å™¨</h2><p>Docker Compose å°†æ‰€ç®¡ç†çš„å®¹å™¨åˆ†ä¸ºä¸‰å±‚ï¼Œåˆ†åˆ«æ˜¯å·¥ç¨‹ï¼ˆprojectï¼‰ã€æœåŠ¡ï¼ˆserviceï¼‰ã€å®¹å™¨ï¼ˆcontainerï¼‰<br>Docker Compose è¿è¡Œç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆdocker-compose.ymlï¼‰ç»„æˆä¸€ä¸ªå·¥ç¨‹,ä¸€ä¸ªå·¥ç¨‹åŒ…å«å¤šä¸ªæœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡ä¸­å®šä¹‰äº†å®¹å™¨è¿è¡Œçš„é•œåƒã€å‚æ•°ã€ä¾èµ–ï¼Œä¸€ä¸ªæœåŠ¡å¯åŒ…æ‹¬å¤šä¸ªå®¹å™¨å®ä¾‹</p><h2 id="docker-composeè¯­æ³•"><a class="markdownIt-Anchor" href="#docker-composeè¯­æ³•"></a> docker-composeè¯­æ³•</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">version: &apos;3&apos;</span><br><span class="line">services:</span><br><span class="line">  web:</span><br><span class="line">    build: .</span><br><span class="line">    ports:</span><br><span class="line">    - &quot;5000:5000&quot;</span><br><span class="line">    volumes:</span><br><span class="line">    - .:/code</span><br><span class="line">    - logvolume01:/var/log</span><br><span class="line">    links:</span><br><span class="line">    - redis</span><br><span class="line">  redis:</span><br><span class="line">    image: redis</span><br><span class="line">volumes:</span><br><span class="line">  logvolume01: &#123;&#125;</span><br></pre></td></tr></table></figure><h3 id="ç‰ˆæœ¬å·"><a class="markdownIt-Anchor" href="#ç‰ˆæœ¬å·"></a> ç‰ˆæœ¬å·</h3><p>ç¬¬ä¸€è¡Œé‚£ä¸ªæ˜¯docker-composeæ–‡ä»¶çš„ç‰ˆæœ¬å·ï¼Œä¸åŒçš„ç‰ˆæœ¬å·å—æ”¯æŒçš„docker-composeä¸åŒã€‚</p><h3 id="services"><a class="markdownIt-Anchor" href="#services"></a> <code>services:</code></h3><p>å®šä¹‰äº†ä¸€ä¸ªå·¥ç¨‹ï¼Œä¸€ä¸ªå·¥ç¨‹(services)é‡Œé¢ä¼šåŒ…å«å¤šä¸ªæœåŠ¡(service)ï¼Œä¸Šé¢è¿™ä¸ªå·¥ç¨‹åŒ…å«äº†ä¸¤ä¸ªæœåŠ¡webå’Œredis</p><h4 id="buildå’Œimage"><a class="markdownIt-Anchor" href="#buildå’Œimage"></a> <code>build</code>å’Œ<code>image</code></h4><p>åœ¨ä¸€ä¸ªå®¹å™¨çš„å®šä¹‰ä¸­ï¼Œbuildè¡¨ç¤ºè¿™ä¸ªå®¹å™¨æ˜¯é€šè¿‡ä¸€ä¸ªDockerfileæ„å»ºå‡ºæ¥çš„ï¼Œè€Œimageè¡¨ç¤ºè¿™ä¸ªå®¹å™¨ç›´æ¥ä½¿ç”¨äº†ä¸€ä¸ªäº‘ç«¯çš„imageã€‚</p><p>ä¸Šé¢é‚£ä¸ªå®¹å™¨<code>web:</code>ä¸­çš„<code>build:.</code>è¡¨ç¤ºåœ¨ç”¨ç›®å½•çš„Dockerfileæ„å»ºå®¹å™¨ã€‚<code>redis:</code>ä¸­çš„<code>image: redis</code>è¡¨ç¤ºç›´æ¥ç”¨redisé•œåƒæ„å»ºå®¹å™¨ã€‚</p><h4 id="portså’Œvolumes"><a class="markdownIt-Anchor" href="#portså’Œvolumes"></a> <code>ports</code>å’Œ<code>volumes</code></h4><p>ç«¯å£æ˜ å°„ï¼Œç­‰åŒäºåœ¨docker runå¯åŠ¨å®¹å™¨æ—¶çš„<code>-p</code>å’Œ<code>-v</code>å‚æ•°ã€‚</p><h4 id="links"><a class="markdownIt-Anchor" href="#links"></a> <code>links</code></h4><p>docker-composeå¯åŠ¨åä¼šåœ¨ä¸»æœºä¸­å»ºç«‹ä¸€ä¸ªDNSæœåŠ¡å™¨ï¼Œå¦‚æœæ˜¯æŒ‰ç…§ä¸Šé¢çš„docker-composeæ–‡ä»¶å¯åŠ¨ï¼Œä¸»æœºé™¤äº†å¯ä»¥é€šè¿‡<code>http://127.0.0.1:5000</code>ï¼ˆ<code>web:ports</code>æŒ‡å®šçš„ä¸»æœºç«¯å£æ˜ å°„ï¼‰è®¿é—®<code>web</code>å®¹å™¨ä¹‹å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡<code>http://web:5000</code>å’Œ<code>redis:6379</code>ï¼ˆå°±æ˜¯<code>[ç½‘å€]:[ç«¯å£]</code>ï¼‰è®¿é—®<code>web</code>å®¹å™¨å’Œ<code>redis</code>å®¹å™¨ã€‚</p><blockquote><p>Containers for the linked service are reachable at a hostname identical to the alias, or the service name if no alias was specified.</p></blockquote><p>å½“ä½¿ç”¨å¦‚ä¸Šæ‰€ç¤ºçš„<code>web:links:-redis</code>ä¹‹åï¼Œåœ¨<code>web</code>å®¹å™¨é‡Œé¢ä¹Ÿå¯ä»¥ç”¨<code>redis:6379</code>ï¼ˆ6379æ˜¯redisé»˜è®¤ç«¯å£å’Œå®¹å™¨è®¾ç½®æ— å…³ï¼‰è®¿é—®<code>redis</code>å®¹å™¨äº†ã€‚<code>links</code>è¿˜å¯ä»¥å®šä¹‰ä¸€ä¸ªåˆ«åï¼Œå¦‚<code>links:-&quot;redis:rds&quot;</code>ï¼ˆæ³¨æ„å¼•å·ï¼‰ï¼Œè¿™æ—¶å°±æ˜¯ç”¨<code>rds:6379</code>è®¿é—®<code>redis</code>å®¹å™¨ã€‚</p><p>å¸¸è§ä½†å·²ç»ä¸å»ºè®®ä½¿ç”¨ï¼Œæ‰“ä¸Š<code>links</code>ä¹‹ådocker-composeä¼šæŒ‰é¡ºåºå¯åŠ¨å®¹å™¨ï¼Œä¸Šé¢çš„ä¾‹å­ä¸­<code>web:links:-redis</code>ä¹‹åwebå®¹å™¨ä¼šåœ¨rediså®¹å™¨å¯åŠ¨å®Œæ‰å¯åŠ¨ï¼›ä½†æ˜¯å¦‚æœåç»­å¼€å‘æˆ‘åˆæƒ³è®©<code>redis</code>é‡Œé¢èƒ½è®¿é—®<code>web</code>å‘¢ï¼Ÿé‚£å½“ç„¶æ˜¯å†åœ¨<code>redis</code>é‡Œé¢å†™ä¸ª<code>redis:links:-web</code>äº†ï¼Ÿè¿™ä¹ˆå†™äº†docker-composeç›´æ¥ç»™æˆ‘æŠ¥äº†ä¸ªâ€œå¾ªç¯ä¾èµ–â€é”™è¯¯ğŸ™‚å‘µå‘µã€‚</p><p>æ‰€ä»¥linksåªæ˜¯ä¸€ä¸ªç®€å•çš„å®¹å™¨äº’è”æ–¹æ³•ï¼Œæ¯”è¾ƒå¤æ‚çš„å®¹å™¨äº’è”æ­£ç¡®å§¿åŠ¿è§ä¸‹ä¸€èŠ‚ã€‚</p><blockquote><p>Warning: The <code>--link</code> flag is a legacy feature of Docker. It may eventually be removed. Unless you absolutely need to continue using it, we recommend that you use user-defined networks to facilitate communication between two containers instead of using <code>--link</code>. One feature that user-defined networks do not support that you can do with <code>--link</code> is sharing environmental variables between containers. However, you can use other mechanisms such as volumes to share environment variables between containers in a more controlled way.</p></blockquote><h2 id="å®¹å™¨äº’è”"><a class="markdownIt-Anchor" href="#å®¹å™¨äº’è”"></a> å®¹å™¨äº’è”</h2><h3 id="overview"><a class="markdownIt-Anchor" href="#overview"></a> Overview</h3><blockquote><p>One of the reasons Docker containers and services are so powerful is that you can connect them together, or connect them to non-Docker workloads. Docker containers and services do not even need to be aware that they are deployed on Docker, or whether their peers are also Docker workloads or not. Whether your Docker hosts run Linux, Windows, or a mix of the two, you can use Docker to manage them in a platform-agnostic way.</p></blockquote><p>å®¹å™¨äº’è”å°±æ˜¯å°†å„ä¸ªç‹¬ç«‹çš„Dockerå®¹å™¨è¿æ¥åœ¨ä¸€èµ·ï¼Œå°±å¥½åƒå®ƒä»¬é‡Œé¢çš„ç¨‹åºè¿è¡Œåœ¨ä¸€ä¸ªç³»ç»Ÿä¸­ã€‚å®¹å™¨äº’è”çš„æ–¹å¼åŸºæœ¬ä¸Šæ˜¯é€šè¿‡è™šæ‹Ÿçš„ç½‘ç»œè¿æ¥å’Œä¸€äº›ç«¯å£æ˜ å°„ä½¿å®¹å™¨å†…éƒ¨èƒ½é€šè¿‡æŸä¸ªç«¯å£æˆ–IPè®¿é—®åˆ°å…¶ä»–çš„å®¹å™¨ã€‚</p><h3 id="æ­£ç¡®å§¿åŠ¿"><a class="markdownIt-Anchor" href="#æ­£ç¡®å§¿åŠ¿"></a> æ­£ç¡®å§¿åŠ¿</h3><p>å®šä¹‰ä¸€ä¸ª<code>network</code>å–å<code>net1</code>ï¼Œç„¶åæŠŠè¦äº’è”çš„å®¹å™¨<code>networks</code>å­—æ®µé‡Œé¢å†™ä¸Šè¿™ä¸ª<code>net1</code>ç„¶åå®ƒä»¬å°±èƒ½åƒäº’ç›¸linksè¿‡ä¸€æ ·äº’è”äº†ğŸ‘‡è€Œä¸”ä¸ä¼šæœ‰â€œå¾ªç¯ä¾èµ–â€ã€‚ä¸è¿‡è¿™æ—¶å€™å®¹å™¨é—´æ²¡æœ‰ä¾èµ–å…³ç³»è€Œä¼šåŒæ—¶å¯åŠ¨ï¼Œå¯¹äºç¡®å®æœ‰ä¾èµ–å…³ç³»çš„å®¹å™¨ï¼Œå°±ç”¨<code>depends_on</code>å±æ€§ğŸ‘‰<a href="https://docs.docker.com/compose/compose-file/#/dependson" target="_blank" rel="noopener">è¯·çœ‹è¿™ä¸ª</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">version: &apos;3&apos;</span><br><span class="line">services:</span><br><span class="line">  web:</span><br><span class="line">    build: .</span><br><span class="line">    ports:</span><br><span class="line">    - &quot;5000:5000&quot;</span><br><span class="line">    volumes:</span><br><span class="line">    - .:/code</span><br><span class="line">    - logvolume01:/var/log</span><br><span class="line">    networks:</span><br><span class="line">    - &quot;net1&quot;</span><br><span class="line">  redis:</span><br><span class="line">    image: redis</span><br><span class="line">    networks:</span><br><span class="line">    - &quot;net1&quot;</span><br><span class="line">volumes:</span><br><span class="line">  logvolume01: &#123;&#125;</span><br><span class="line">networks:</span><br><span class="line">  net1:</span><br><span class="line">    driver: bridge</span><br></pre></td></tr></table></figure><p>ğŸ‘†è¿™ä¸ªå®Œäº‹äº†ä¹‹å<code>web</code>å®¹å™¨é‡Œé¢å¯ä»¥è®¿é—®åˆ°<code>redis:6379</code>ï¼Œ<code>redis</code>å®¹å™¨é‡Œé¢ä¹Ÿå¯ä»¥è®¿é—®åˆ°<code>web:5000</code>äº†ã€‚å…³äº<code>networks</code>é‡Œé¢çš„<code>driver</code>å­—æ®µè¯·çœ‹ä¸‹æ–‡ğŸ‘‡ã€‚</p><h3 id="bridgeæ¨¡å¼"><a class="markdownIt-Anchor" href="#bridgeæ¨¡å¼"></a> Bridgeæ¨¡å¼</h3><p>Bridgeæ˜¯dockerç½‘ç»œè¿æ¥çš„é»˜è®¤æ¨¡å¼ï¼Œæ•ˆæœå’Œä¸Šæ–‡ä¸­çš„é‚£ä¸ª<code>links</code>æ•ˆæœä¸€æ ·ï¼Œè®¾ç½®å®Œä¹‹åå°±æ˜¯é€šè¿‡<code>[åç§°]:[ç«¯å£]</code>è®¿é—®å®¹å™¨ã€‚</p><p>ğŸ‘†è¿™ä¸ªæ¯”è¾ƒå¸¸ç”¨</p><p><a href="https://docs.docker.com/network/network-tutorial-standalone/" target="_blank" rel="noopener">å…·ä½“æ€ä¹ˆè®¾ç½®ï¼Œçœ‹è¿™ä¸ªä»å‘½ä»¤è¡Œå¼€å§‹çš„èŒƒä¾‹</a></p><h3 id="hostæ¨¡å¼"><a class="markdownIt-Anchor" href="#hostæ¨¡å¼"></a> Hostæ¨¡å¼</h3><p>Hostæ¨¡å¼æ˜¯ä¸€ç§ç‰¹æ®Šçš„Bridgeã€‚æ­£å¸¸çš„Birdgeéƒ½æ˜¯å®¹å™¨é—´äº’è”ï¼ŒHostå°±æ˜¯å®¹å™¨å’Œä¸»æœºé—´äº’è”ã€‚æ•ˆæœåŒ<code>docker run</code>ä¸­çš„<code>-p</code>å‚æ•°æŒ‡å®šç«¯å£æ˜ å°„ä¸€æ ·ã€‚</p><p><a href="https://docs.docker.com/network/network-tutorial-host/" target="_blank" rel="noopener">è¿™ä¸ªso easyï¼Œç‚¹æˆ‘çœ‹èŒƒä¾‹</a></p><p><a href="https://docs.docker.com/network/" target="_blank" rel="noopener">ç¿»è¯‘ä¸€ä¸‹è¿™ä¸ªï¼Œåº”è¯¥å°±èƒ½ç”¨èµ·æ¥äº†</a></p><h3 id="overlayå’Œmacvlanæ¨¡å¼"><a class="markdownIt-Anchor" href="#overlayå’Œmacvlanæ¨¡å¼"></a> Overlayå’ŒMacvlanæ¨¡å¼</h3><ul><li>Overlayæ¨¡å¼ç”¨äºæœ‰å¤šä¸ªç‰©ç†ä¸»æœºçš„é›†ç¾¤(Swarm)</li><li>Macvlanæ¨¡å¼æ˜¯åŸºäºMACåœ°å€å’Œvlanè®¾ç½®çš„ç½‘ç»œ</li></ul><p>ğŸ‘†æš‚æ—¶ç”¨ä¸åˆ°ï¼Œå‘Šè¾</p><h2 id="ç¯å¢ƒå˜é‡"><a class="markdownIt-Anchor" href="#ç¯å¢ƒå˜é‡"></a> ç¯å¢ƒå˜é‡</h2><p>ä¸€ä¸ªç®€å•çš„ä¾‹å­ğŸ‘‡åœ¨<code>web</code>å®¹å™¨ä¸­æŠŠDEBUGç¯å¢ƒå˜é‡è®¾ä¸º1</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">version: &apos;3&apos;</span><br><span class="line">services:</span><br><span class="line">  web:</span><br><span class="line">    environment:</span><br><span class="line">      DEBUG: 1</span><br></pre></td></tr></table></figure></div><div id="current-post-cover" data-scr="/img/cart_cover.jpg"></div><div class="investment-container"><div class="investment-header"><div class="investment-title-1"><div class="on">ç›¸å…³æ–‡ç« </div><div>è¯„è®º</div><div>åˆ†äº«</div></div><div class="investment-title-2"><span><a href="javascript: window.scrollTo(0, 0);">è¿”å›é¡¶éƒ¨</a> <a href="/ç¿»è¯‘/Pattern Decompose by business capability.html" title="æ¨¡å¼ï¼šæ ¹æ®ä¸šåŠ¡èƒ½åŠ›æ‹†åˆ†" rel="prev">&laquo;ä¸Šä¸€ç¯‡ </a><a href="/æ•°æ®åº“/å„ç§æ•°æ®åº“æ¦‚è¿°.html" title="å„ç§æ•°æ®åº“æ¦‚è¿°" rel="next">ä¸‹ä¸€ç¯‡&raquo;</a></span></div></div><div class="investment-content"><div class="investment-content-list"><div class="relate-post"><ul><li><div class="relate-post-text"><a class="relate-post-title" href="/Docker/cgroups.html" title="Linux Cgroups (Control Groups)">Linux Cgroups (Control Groups)</a><p class="relate-post-date"><i class="fa fa-calendar"></i> å…­æœˆ 19æ—¥, 2020</p><p class="relate-post-content">DockerèƒŒåçš„å†…æ ¸çŸ¥è¯†â€”â€”cgroupsèµ„æºé™åˆ¶é€šä¿—çš„æ¥è¯´ï¼Œcgroupså¯ä»¥é™åˆ¶ã€è®°å½•ã€éš”ç¦»è¿›ç¨‹ç»„æ‰€ä½¿ç”¨çš„ç‰©ç†èµ„æºï¼ˆåŒ…æ‹¬ï¼šCPUã€memoryã€IOç­‰ï¼‰ï¼Œä¸ºå®¹å™¨å®ç°è™šæ‹ŸåŒ–æä¾›äº†åŸºæœ¬ä¿è¯ï¼Œæ˜¯æ„å»ºDockerç­‰ä¸€ç³»åˆ—è™šæ‹ŸåŒ–ç®¡ç†å·¥å…·çš„...</p></div><div class="relate-post-cover"><a href="/Docker/cgroups.html" title="Linux Cgroups (Control Groups)"><img class="lazy" src="/img/placeholder.jpg" data-src="/img/cart_cover.jpg" alt="Linux Cgroups (Control Groups)"></a></div></li><li><div class="relate-post-text"><a class="relate-post-title" href="/Docker/sane_behavior.html" title="ã€çº¯è½¬è½½ã€‘ä¸‹ä¸€ä»£çš„CGroup">ã€çº¯è½¬è½½ã€‘ä¸‹ä¸€ä»£çš„CGroup</a><p class="relate-post-date"><i class="fa fa-calendar"></i> å…­æœˆ 19æ—¥, 2020</p><p class="relate-post-content">åŸæ–‡ä¸Šé¢ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒCGroupçš„ä¸€äº›å¸¸ç”¨æ–¹æ³•å’Œç›¸å…³çš„æœ¯è¯­ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¿™æ ·çš„è®¾è®¡åœ¨ä¸€èˆ¬æƒ…å†µä¸‹è¿˜æ˜¯æ²¡ä»€ä¹ˆé—®é¢˜çš„ï¼Œé™¤äº†æ“ä½œä¸Šçš„ç”¨æˆ·ä½“éªŒä¸æ˜¯å¾ˆå¥½ï¼Œä½†åŸºæœ¬æ»¡è¶³æˆ‘ä»¬çš„ä¸€èˆ¬éœ€æ±‚äº†ã€‚ä¸è¿‡ï¼Œå¯¹æ­¤ï¼Œæœ‰ä¸ªå«Tejun Heoçš„åŒå­¦éå¸¸ä¸çˆ½ï¼Œä»–åœ¨Lin...</p></div><div class="relate-post-cover"><a href="/Docker/sane_behavior.html" title="ã€çº¯è½¬è½½ã€‘ä¸‹ä¸€ä»£çš„CGroup"><img class="lazy" src="/img/placeholder.jpg" data-src="/img/cart_cover.jpg" alt="ã€çº¯è½¬è½½ã€‘ä¸‹ä¸€ä»£çš„CGroup"></a></div></li><li><div class="relate-post-text"><a class="relate-post-title" href="/Docker/namespace.html" title="namespace">namespace</a><p class="relate-post-date"><i class="fa fa-calendar"></i> å…­æœˆ 18æ—¥, 2020</p><p class="relate-post-content">å¼•å…¥ï¼šLinuxä¸Šçš„èµ„æºéš”ç¦»æŒ‡ä»¤chrootchrootï¼Œå³ change root directoryï¼Œæ›´æ”¹ root ç›®å½•ã€‚åœ¨ linux ç³»ç»Ÿä¸­ï¼Œç³»ç»Ÿé»˜è®¤çš„ç›®å½•ç»“æ„éƒ½æ˜¯ä»¥/ï¼Œå³æ˜¯ä»¥æ ¹ (root) å¼€å§‹çš„ã€‚è€Œåœ¨ä½¿ç”¨ chroo...</p></div><div class="relate-post-cover"><a href="/Docker/namespace.html" title="namespace"><img class="lazy" src="/img/placeholder.jpg" data-src="/img/cart_cover.jpg" alt="namespace"></a></div></li><li><div class="relate-post-text"><a class="relate-post-title" href="/Docker/AUFS.html" title="AUFSæŠ€æœ¯">AUFSæŠ€æœ¯</a><p class="relate-post-date"><i class="fa fa-calendar"></i> å…­æœˆ 18æ—¥, 2020</p><p class="relate-post-content">æ•™ç¨‹å‚è€ƒAUFSæ˜¯ä¸€ç§è”åˆæ–‡ä»¶ç³»ç»Ÿ (Union File System, UnionFS, UFS)ã€‚AUFSåˆå«Another UnionFSï¼Œåæ¥å«Alternative UnionFSï¼Œåæ¥å¯èƒ½è§‰å¾—ä¸å¤Ÿéœ¸æ°”ï¼Œå«æˆAdvance...</p></div><div class="relate-post-cover"><a href="/Docker/AUFS.html" title="AUFSæŠ€æœ¯"><img class="lazy" src="/img/placeholder.jpg" data-src="/Docker/i/AUFSå’ŒDocker.png" alt="AUFSæŠ€æœ¯"></a></div></li><li><div class="relate-post-text"><a class="relate-post-title" href="/Docker/namespaces/Network.html" title="Network namespace">Network namespace</a><p class="relate-post-date"><i class="fa fa-calendar"></i> å…­æœˆ 18æ—¥, 2020</p><p class="relate-post-content">Linux è™šæ‹Ÿç½‘ç»œè®¾å¤‡ TUN/TAPTUN è®¾å¤‡æ˜¯ä¸€ç§è™šæ‹Ÿç½‘ç»œè®¾å¤‡ï¼Œé€šè¿‡æ­¤è®¾å¤‡ï¼Œç¨‹åºå¯ä»¥æ–¹ä¾¿å¾—æ¨¡æ‹Ÿç½‘ç»œè¡Œä¸ºã€‚å¯¹äºç‰©ç†è®¾å¤‡ï¼Œå…¶åè®®æ ˆä»ç‰©ç†ç½‘å¡ä¸­è¯»å†™æ•°æ®ï¼šè€ŒTUN è®¾å¤‡çš„åè®®æ ˆä»æ–‡ä»¶ä¸­è¯»å†™æ•°æ®ï¼šæ‰€æœ‰å¯¹è¿™ä¸ªæ–‡ä»¶çš„å†™æ“ä½œä¼šé€šè¿‡ TUN...</p></div><div class="relate-post-cover"><a href="/Docker/namespaces/Network.html" title="Network namespace"><img class="lazy" src="/img/placeholder.jpg" data-src="/Docker/namespaces/../i/Linuxè™šæ‹Ÿç½‘ç»œè®¾å¤‡.png" alt="Network namespace"></a></div></li><li><div class="relate-post-text"><a class="relate-post-title" href="/Docker/namespaces/PIDandIPC.html" title="PID namespace">PID namespace</a><p class="relate-post-date"><i class="fa fa-calendar"></i> å…­æœˆ 18æ—¥, 2020</p><p class="relate-post-content">å†…æ ¸ä¸ºæ‰€æœ‰çš„PID namespaceç»´æŠ¤äº†ä¸€ä¸ªæ ‘çŠ¶ç»“æ„ï¼Œæœ€é¡¶å±‚çš„æ˜¯ç³»ç»Ÿåˆå§‹æ—¶åˆ›å»ºçš„ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºroot namespaceã€‚ä»–åˆ›å»ºçš„æ–°PID namespaceå°±ç§°ä¹‹ä¸ºchild namespaceï¼ˆæ ‘çš„å­èŠ‚ç‚¹ï¼‰ï¼Œè€ŒåŸå…ˆçš„PID n...</p></div><div class="relate-post-cover"><a href="/Docker/namespaces/PIDandIPC.html" title="PID namespace"><img class="lazy" src="/img/placeholder.jpg" data-src="/img/cart_cover.jpg" alt="PID namespace"></a></div></li><li><div class="relate-post-text"><a class="relate-post-title" href="/Docker/namespaces/UTSandUser.html" title="UTS(UNIX Time-sharing System) namespace">UTS(UNIX Time-sharing System) namespace</a><p class="relate-post-date"><i class="fa fa-calendar"></i> å…­æœˆ 18æ—¥, 2020</p><p class="relate-post-content">Uts_namespaceåˆ†æ UTSæ˜¯ä»€ä¹ˆå½“å‰ä¸€ä¸ªç³»ç»Ÿçš„utsæ˜¯linuxä¸»æœºæ‰€ç”¨çš„æ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬ã€ç¡¬ä»¶åç§°ç­‰åŸºæœ¬ä¿¡æ¯ã€‚utsä¿¡æ¯åœ¨æ“ä½œç³»ç»Ÿå†…æ ¸ä¸­å®šä¹‰ä¸ºä¸€ä¸ªç»“æ„ä½“,å…¶å€¼å¯ä»¥é€šè¿‡ä¸€äº›set*å‡½æ•°è®¾ç½®ï¼š12345678struct ne...</p></div><div class="relate-post-cover"><a href="/Docker/namespaces/UTSandUser.html" title="UTS(UNIX Time-sharing System) namespace"><img class="lazy" src="/img/placeholder.jpg" data-src="/img/cart_cover.jpg" alt="UTS(UNIX Time-sharing System) namespace"></a></div></li><li><div class="relate-post-text"><a class="relate-post-title" href="/Docker/namespaces/Mount.html" title="Mount namespace">Mount namespace</a><p class="relate-post-date"><i class="fa fa-calendar"></i> å…­æœˆ 18æ—¥, 2020</p><p class="relate-post-content">å®ƒæ˜¯å†å²ä¸Šç¬¬ä¸€ä¸ªLinux namespaceï¼Œæ‰€ä»¥å®ƒçš„æ ‡è¯†ä½æ¯”è¾ƒç‰¹æ®Šï¼Œå°±æ˜¯CLONE_NEWNSã€‚Mount namespaceé€šè¿‡éš”ç¦»æ–‡ä»¶ç³»ç»ŸæŒ‚è½½ç‚¹å¯¹éš”ç¦»æ–‡ä»¶ç³»ç»Ÿæä¾›æ”¯æŒï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ clone å‡½æ•°æˆ– unshare å‡½æ•°å¹¶ä¼ å…¥...</p></div><div class="relate-post-cover"><a href="/Docker/namespaces/Mount.html" title="Mount namespace"><img class="lazy" src="/img/placeholder.jpg" data-src="/Docker/namespaces/../i/mountnamespace.png" alt="Mount namespace"></a></div></li><li><div class="relate-post-text"><a class="relate-post-title" href="/Docker/åŸç†æ¦‚è¿°.html" title="DockeråŸç†æ¦‚è¿°">DockeråŸç†æ¦‚è¿°</a><p class="relate-post-date"><i class="fa fa-calendar"></i> å…­æœˆ 18æ—¥, 2020</p><p class="relate-post-content">Any problem in computer science can be solved by another layer of indirection.è®¡ç®—æœºç§‘å­¦é¢†åŸŸçš„ä»»ä½•é—®é¢˜éƒ½å¯ä»¥é€šè¿‡å¢åŠ ä¸€ä¸ªé—´æ¥çš„ä¸­é—´å±‚æ¥è§£å†³ã€‚åŸºç¡€æ•™ç¨‹VMWa...</p></div><div class="relate-post-cover"><a href="/Docker/åŸç†æ¦‚è¿°.html" title="DockeråŸç†æ¦‚è¿°"><img class="lazy" src="/img/placeholder.jpg" data-src="/Docker/i/è™šæ‹Ÿæœºæ¶æ„.png" alt="DockeråŸç†æ¦‚è¿°"></a></div></li><li><div class="relate-post-text"><a class="relate-post-title" href="/Docker/Docker-proxy.html" title="Docker ä»£ç†æ€»ç»“">Docker ä»£ç†æ€»ç»“</a><p class="relate-post-date"><i class="fa fa-calendar"></i> åäºŒæœˆ 18æ—¥, 2019</p><p class="relate-post-content">ä¸ºdocker pullè®¾ç½®ä»£ç†ç»™docker pullæ„å‘³ç€é€šè¿‡ä»£ç†ä¸‹è½½é•œåƒã€‚ åœ¨windowsä¸Šdocker desktopä¸Šçš„proxiesè®¾ç½®å°±æ˜¯è®¾ç½®çš„docker pullä»£ç†ã€‚é»˜è®¤æƒ…å†µä¸‹æ˜¯10.0.75.1è€Œä¸æ˜¯127....</p></div><div class="relate-post-cover"><a href="/Docker/Docker-proxy.html" title="Docker ä»£ç†æ€»ç»“"><img class="lazy" src="/img/placeholder.jpg" data-src="/img/cart_cover.jpg" alt="Docker ä»£ç†æ€»ç»“"></a></div></li></ul></div></div><div class="investment-content-list"><div class="layout-comment"><div>Please check the comment setting in config.yml of hexo-theme-Annie!</div></div></div><div class="investment-content-list"><div class="layout-share"><div class="social-share"></div><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css"><script async src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script></div></div></div></div></div></div><script src="/plugin/clipboard/clipboard.js"></script><script>function codePreprocessing(){$("#article-content .highlight").each(function(){$(this).wrap('<div id="post-code"></div>')}),$("#article-content #post-code").each(function(){$(this).prepend('<nav class="copy-nav"><span><i class="code-language"></i></span></nav>')}),$("#article-content .copy-nav").each(function(){var t=$(this).next().attr("class"),e=9<t.length&&null!=t?t.substr(10):"none";$(this).find(".code-language").text(e),$(this).append('<span class="copy-btn"><i class="fa fa-copy" aria-hidden="true"></i></span>')})}function codeCopy(){$("#article-content #post-code").each(function(t){var e="codeCopy-"+t,n=$(this).find(".code"),o=$(this).find(".copy-btn");n.attr("id",e),o.attr("data-clipboard-target-id",e)});var t=new ClipboardJS(".copy-btn",{target:function(t){return document.getElementById(t.getAttribute("data-clipboard-target-id"))}});t.on("success",function(t){var e;t.clearSelection(),console.info("Action:",t.action),console.info("Trigger:",t.trigger),(e=t.trigger).setAttribute("aria-label","Copied!"),e.setAttribute("class","copy-btn copy-status"),setTimeout(function(){e.setAttribute("class","copy-btn")},2e3)}),t.on("error",function(t){console.error("Action:",t.action),console.error("Trigger:",t.trigger)})}$(".layout-post").length&&(codePreprocessing(),codeCopy())</script><link rel="stylesheet" href="/plugin/fancybox/jquery.fancybox.css"><script src="/plugin/fancybox/jquery.fancybox.js"></script><script type="text/javascript">var titleID=$(".article-title a"),imageID=$(".article-content img"),videoID=$(".article-content video"),postTitle=titleID.text()?titleID.text():"No post title!";imageID.each(function(){var t=$(this).attr("src"),a=$(this).attr("alt")?$(this).attr("alt"):"No image description!";$(this).wrap('<a data-fancybox="gallery" data-caption=" ã€Š '+postTitle+" ã€‹ "+a+' "  href=" '+t+' "> </a>')}),videoID.each(function(){var t=$(this).attr("src");$(this).wrap('<a data-fancybox href=" '+t+' "> </a>')}),$("#layout-post").length&&$('[data-fancybox="gallery"]').fancybox({loop:!0,buttons:["zoom","share","slideShow","fullScreen","thumbs","close"],protect:!1})</script></main><footer><div class="social"><ul><li><a href="http://github.com/yindaheng98" target="_blank"><i class="fa fa-github"></i></a></li><li><a href="http://github.com/yindaheng98" target="_blank"><i class="fa fa-weibo"></i></a></li><li><a href="http://github.com/yindaheng98" target="_blank"><i class="fa fa-pinterest"></i></a></li><li><a href="http://github.com/yindaheng98" target="_blank"><i class="fa fa-instagram"></i></a></li><li><a href="http://github.com/yindaheng98" target="_blank"><i class="fa fa-twitter"></i></a></li><li><a href="/atom.xml" target="_blank"><i class="fa fa-rss"></i></a></li></ul></div><div class="copyright"><p>&copy;2017 - 2020, content by Howard Yin. All Rights Reserved.<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv">æœ¬æ–‡æ€»é˜…è¯»é‡<span id="busuanzi_value_page_pv"></span>æ¬¡</span></p><p><a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a> Theme <a href="https://github.com/Sariay/hexo-theme-Annie" title="Annie" target="_blank" rel="noopener">Annie</a> by Sariay. <a href="javascript:zh_tran('s');" class="zh_click" id="zh_click_s">ç®€ä½“</a> <a href="javascript:zh_tran('t');" class="zh_click" id="zh_click_t">ç¹é«”</a></p></div></footer><script src="/plugin/motto/motto.js"></script><script type="text/javascript">$(".motto").html(getMingYanContent())</script><div id="totop"><a href="javascript:;" name="TOTOP" class="fa fa-arrow-up"></a></div><script src="/plugin/vibrant/vibrant.js"></script><script src="/plugin/chinese/chinese.js"></script><script src="/plugin/imgLazyLoader/yall.min.js"></script><script src="/plugin/imgResize/jquery.resizeimagetoparent.min.js"></script><script src="/plugin/nicescroll/jquery.nicescroll.js"></script><script src="/js/resizediv.js"></script><script src="/js/main.js"></script><script src="https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js"></script><script>window.mermaid&&mermaid.initialize({theme:"forest"})</script></body></html>